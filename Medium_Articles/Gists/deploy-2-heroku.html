<!DOCTYPE html>
<html lang="en">


<head>


  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="content-language" content="en-us">
  <meta name="csrf-token" value="abI2zOnZnZ4lK2hhXDpfWnEsePWz7XmLPaj0IDqr">
  <title> | bgoonz | GistLog - Your dev blog delivered</title>

  <!-- Schema.org markup for Google+ -->
  <meta itemprop="name" content="">
  <meta itemprop="description" content="Deploy to Heroku

Deploy an app to Heroku

  
This is a very simple GitHub action that allows you to deploy to Heroku. The action works by running the following commands in shell via NodeJS:-
Table of">

  <!-- Open Graph data -->
  <meta property="og:title" content="">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://gistlog.co/bgoonz/0d4010f180dbbe3e97b45b604317f6d7">
  <meta property="og:description" content="Deploy to Heroku

Deploy an app to Heroku

  
This is a very simple GitHub action that allows you to deploy to Heroku. The action works by running the following commands in shell via NodeJS:-
Table of">
  <meta property="og:site_name" content="GistLog">


  <link rel="icon" type="image/png" href="https://gistlog.co/img/favicon.png">
  <link rel="stylesheet" href="http://brick.a.ssl.fastly.net/Roboto:100,300,400,700">
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
  <link href="https://gistlog.co/css/app.css" rel="stylesheet">


  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body class="font-sans border-t-8 border-blue-darker bg-grey-lightest">
  <div class="flex flex-col h-screen">
    <div id="app" class="flex-auto">
      <nav class="container mx-auto mt-4">
        <a href="https://gistlog.co/" title="GistLog by Tighten"
          class="w-full flex items-center text-blue-darker no-underline">
          <img width="50px" src="https://gistlog.co/img/gistlog-logo.svg" alt="GistLog logo." class="mr-2">
          <h1 class="text-2xl"><span class="font-bold">Gist</span>Log</h1>
        </a>
      </nav>


      <div class="container gistlog__container">
        <div class="avatar">
          <a href="https://gistlog.co/bgoonz" target="_blank">
            <img src="https://avatars.githubusercontent.com/u/66654881?v=4" alt="bgoonz - Laravel">
          </a>
        </div>
        <div class="py-8 gistlog sm:px-8">
          <article class="px-4 my-8 sm:px-8">
            <h1 class="gistlog__title" v-pre></h1>
            <span class="table mx-auto font-light" v-pre>
              by <a href="https://gistlog.co/bgoonz" class="font-bold no-underline text-blue-dark">bgoonz</a>
            </span>

            <div class="gistlog__content">
              <div v-pre>
                <h1>Deploy to Heroku</h1>
                <blockquote>
                  <p>Deploy an app to Heroku</p>
                </blockquote>
                <p><a
                    href="https://camo.githubusercontent.com/631c224fb10dcf61d20b9ca8675b19be8e16cd704ec88a28cc16ed373c46f12c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732f416b68696c6573684e532f6865726f6b752d6465706c6f792e737667"
                    rel="nofollow"><img
                      src="https://camo.githubusercontent.com/631c224fb10dcf61d20b9ca8675b19be8e16cd704ec88a28cc16ed373c46f12c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732f416b68696c6573684e532f6865726f6b752d6465706c6f792e737667"
                      alt="GitHub issues" style="max-width:100%;"></a> <a
                    href="https://camo.githubusercontent.com/9b937f4fef362e2af67b520da4fedd685c2074b3a4b165f677a6cffaad6560de/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f416b68696c6573684e532f6865726f6b752d6465706c6f792e737667"
                    rel="nofollow"><img
                      src="https://camo.githubusercontent.com/9b937f4fef362e2af67b520da4fedd685c2074b3a4b165f677a6cffaad6560de/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f416b68696c6573684e532f6865726f6b752d6465706c6f792e737667"
                      alt="GitHub" style="max-width:100%;"></a> <a
                    href="https://github.com/AkhileshNS/heroku-deploy/workflows/Tests/badge.svg"><img
                      src="https://github.com/AkhileshNS/heroku-deploy/workflows/Tests/badge.svg" alt="Tests"
                      style="max-width:100%;"></a></p>
                <p>This is a very simple GitHub action that allows you to deploy to Heroku. The action works by running
                  the following commands in shell via NodeJS:-</p>
                <h2>Table of Contents</h2>
                <ol>
                  <li><a href="#getting-started">Getting Started</a></li>
                  <li><a href="#important-note">Important Note</a></li>
                  <li><a href="#options">Options</a></li>
                  <li><a href="#examples">Examples</a>
                    <ul>
                      <li><a href="#deploy-with-docker">Deploy with Docker</a></li>
                      <li><a href="#deploy-with-custom-buildpacks">Deploy with custom Buildpacks</a></li>
                      <li><a href="#deploy-subdirectory">Deploy Subdirectory</a></li>
                      <li><a href="#deploy-custom-branch">Deploy Custom Branch</a></li>
                    </ul>
                  </li>
                  <li><a href="#health-check">Health Check</a>
                    <ul>
                      <li><a href="#advanced-usage">Advanced Usage</a></li>
                      <li><a href="#adding-delay">Adding Delay</a></li>
                      <li><a href="#rollback-on-healthcheck-failure">Rollback on healthcheck failure</a></li>
                    </ul>
                  </li>
                  <li><a href="#environment-variables">Environment Variables</a>
                    <ul>
                      <li><a href="#env-file">ENV File</a></li>
                    </ul>
                  </li>
                  <li><a href="#procfile-passing">Procfile Passing</a></li>
                  <li><a href="#deploying-to-a-team">Deploying to a team</a></li>
                  <li><a href="#just-login">Just Login</a></li>
                  <li><a href="#important-notes">Important Notes</a></li>
                  <li><a href="#license">License</a></li>
                </ol>
                <h2>Getting Started</h2>
                <p>To get started using the action, just make sure to have a <a
                    href="https://devcenter.heroku.com/articles/getting-started-with-nodejs#define-a-procfile"
                    rel="nofollow">Procfile</a> or a <a href="https://docs.docker.com/engine/reference/builder/"
                    rel="nofollow">Dockerfile</a> in your project and then create a folder called
                  <strong>.github</strong> and inside it, create another folder called <strong>workflows</strong>.
                  Finally inside the workflows folder, create a file called <strong>main.yml</strong> with the following
                  contents:</p>
                <p><em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10 # This is the action<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: "YOUR APP's NAME" #Must be unique in Heroku<br>
                  heroku_email: "YOUR EMAIL"</p>
                <p>Now go to your Heroku account and go to Account Settings. Scroll to the bottom until you see API Key.
                  Copy this key and go to your project's repository on GitHub.</p>
                <p>In your Repo, go to Settings -&gt; Secrets and click on "New Secret". Then enter HEROKU_API_KEY as
                  the name and paste the copied API Key as the value.</p>
                <p>You can now push your project to GitHub and it will be automatically deployed to Heroku henceforth.
                </p>
                <p>You learn more about GitHub Secrets <a
                    href="https://docs.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets">here</a>
                  and GitHub Actions <a href="https://docs.github.com/en/actions">here</a></p>
                <h2>Important Note</h2>
                <p><strong>Please Note</strong>: Git has recently announced that it is planning to switch the default
                  branch's name from "<strong>master</strong>" to "<strong>main</strong>". For this reason, the Action
                  also pushes to the "<strong>main</strong>" branch in the heroku origin by default and if your Heroku
                  App is still using the "<strong>master</strong>" branch, then the Action will automatically switch
                  your Heroku remote to use "<strong>main</strong>" as the default branch. There is <strong>No Action
                    Needed</strong> from you, just keep in mind that this change is occurring as you continue to use the
                  App and if you ever need to manually deploy the App, you can do so using the following command:</p>
                <p>git push heroku YOUR_BRANCH:refs/heads/main</p>
                <p>Also the <code>remote_branch</code> property no longer exists in the latest release of the Action. If
                  you still have this as part of the <code>3.10.9</code> release. Please remove it as it may cause
                  problems in your workflow</p>
                <h2>Options</h2>
                <p>The action comes with additional options that you can use to configure your project's behavior on
                  Heroku. You can setup these options under the "with" object as presented above:</p>
                <table role="table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Required</th>
                      <th>Description</th>
                      <th>Example</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>heroku_api_key</td>
                      <td>true</td>
                      <td>This will be used for authentication. You can find it in your heroku homepage account settings
                      </td>
                      <td>***</td>
                    </tr>
                    <tr>
                      <td>heroku_email</td>
                      <td>true</td>
                      <td>Email that you use with heroku</td>
                      <td><a href="mailto:nsakhilesh02@gmail.com">nsakhilesh02@gmail.com</a></td>
                    </tr>
                    <tr>
                      <td>heroku_app_name</td>
                      <td>true</td>
                      <td>The appname to use for deploying/updating</td>
                      <td>demo-rest-api</td>
                    </tr>
                    <tr>
                      <td>buildpack</td>
                      <td>false</td>
                      <td>An optional buildpack to use when creating the heroku application</td>
                      <td><a
                          href="https://github.com/heroku/heroku-buildpack-static.git">https://github.com/heroku/heroku-buildpack-static.git</a>
                      </td>
                    </tr>
                    <tr>
                      <td>branch</td>
                      <td>false</td>
                      <td>The branch that you would like to deploy to Heroku. Defaults to "HEAD"</td>
                      <td>master, dev, test</td>
                    </tr>
                    <tr>
                      <td>dontautocreate</td>
                      <td>false</td>
                      <td>Set this to true if you don't want to automatically create the Heroku app</td>
                      <td>true or false</td>
                    </tr>
                    <tr>
                      <td>dontuseforce</td>
                      <td>false</td>
                      <td>Set this to true if you don't want to use --force when switching branches</td>
                      <td>true or false</td>
                    </tr>
                    <tr>
                      <td>usedocker</td>
                      <td>false</td>
                      <td>Will deploy using Dockerfile in project root</td>
                      <td>true or false</td>
                    </tr>
                    <tr>
                      <td>docker_heroku_process_type</td>
                      <td>false</td>
                      <td>Type of heroku process (web, worker, etc). This option only makes sense when usedocker
                        enabled. Defaults to "web" (Thanks to <a href="https://github.com/singleton11">singleton11</a>
                        for adding this feature)</td>
                      <td>web, worker</td>
                    </tr>
                    <tr>
                      <td>docker_build_args</td>
                      <td>false</td>
                      <td>A list of args to pass into the Docker build. This option only makes sense when usedocker
                        enabled.</td>
                      <td>NODE_ENV</td>
                    </tr>
                    <tr>
                      <td>appdir</td>
                      <td>false</td>
                      <td>Set if your app is located in a subdirectory</td>
                      <td>api, apis/python</td>
                    </tr>
                    <tr>
                      <td>healthcheck</td>
                      <td>false</td>
                      <td>A URL to which a healthcheck is performed (checks for 200 request)</td>
                      <td><a href="https://demo-rest-api.herokuapp.com/"
                          rel="nofollow">https://demo-rest-api.herokuapp.com</a></td>
                    </tr>
                    <tr>
                      <td>checkstring</td>
                      <td>false</td>
                      <td>Value to check for when conducting healthcheck requests</td>
                      <td>ok</td>
                    </tr>
                    <tr>
                      <td>delay</td>
                      <td>false</td>
                      <td>Time (in seconds) to wait before performing healthcheck. Defaults to 0 seconds</td>
                      <td>5</td>
                    </tr>
                    <tr>
                      <td>procfile</td>
                      <td>false</td>
                      <td>Contents of the Procfile to save and deploy</td>
                      <td>web: npm start</td>
                    </tr>
                    <tr>
                      <td>rollbackonhealthcheckfailed</td>
                      <td>false</td>
                      <td>When set to true this will attempt to rollback to the previous release if the healthcheck
                        fails</td>
                      <td>true or false</td>
                    </tr>
                    <tr>
                      <td>env_file</td>
                      <td>false</td>
                      <td>path to an env file (with respect to appdir)</td>
                      <td>/.env</td>
                    </tr>
                    <tr>
                      <td>justlogin</td>
                      <td>false</td>
                      <td>Set to true if you want the action to just login to Heroku and nothing else</td>
                      <td>true or false</td>
                    </tr>
                    <tr>
                      <td>region</td>
                      <td>false</td>
                      <td>The region in which you would like to deploy a server</td>
                      <td>eu or dublin</td>
                    </tr>
                    <tr>
                      <td>team</td>
                      <td>false</td>
                      <td>If deploying to an organization, then specify the name of the team or organization here</td>
                      <td>team-xyz</td>
                    </tr>
                  </tbody>
                </table>
                <h2>Examples</h2>
                <h3>Deploy with Docker</h3>
                <p>Heroku now allows users to deploy docker containers. To use this feature, simply add a Dockerfile to
                  your project and add a <code>CMD</code> command at the end of the Dockerfile. This is the command used
                  by heroku to start the webserver inside the container. Finally make sure to set the
                  <code>usedocker</code> flag to true before deploying.</p>
                <p><em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10 # This is the action<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: "YOUR APP's NAME" #Must be unique in Heroku<br>
                  heroku_email: "YOUR EMAIL"<br>
                  usedocker: true</p>
                <p>Keep in mind that if you deploy once using docker, the same heroku app is not compatible with a
                  non-docker setup and similarly, you cannot deploy a dockerized setup to a non-docker heroku app.</p>
                <p>If you need to pass in any ARGs for the Docker build, you may provide a list of arg names which
                  automatically pull from the environment.</p>
                <p><em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10 # This is the action<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: "YOUR APP's NAME" #Must be unique in Heroku<br>
                  heroku_email: "YOUR EMAIL"<br>
                  usedocker: true<br>
                  docker_build_args: |<br>
                  NODE_ENV<br>
                  SECRET_KEY<br>
                  env:<br>
                  NODE_ENV: production<br>
                  SECRET_KEY: ${{ secrets.MY_SECRET_KEY }}</p>
                <p>Also, thanks to <a href="https://github.com/olaven">Olav Sundf√∏r</a> for adding the Docker feature
                  and <a href="https://github.com/mbStavola">Matt Stavola</a> for adding the ability to pass in build
                  args.</p>
                <h3>Deploy with custom Buildpacks</h3>
                <p>Taken from the official heroku website:</p>
                <p>"Heroku Buildpacks are sets of open source scripts that are used for compiling apps on Heroku. They
                  form the backbone of Heroku 's <a href="https://www.heroku.com/languages" rel="nofollow">polyglot
                    platform</a>. Buildpacks enable you to extend Heroku's build system to support your language or
                  customizations, or to make particular binary packages available to the runtime. Heroku Buildpacks give
                  you the freedom to code in the languages and frameworks that work best for your app and your team"</p>
                <p>To use a custom buildpack in the action, simply add the url of the buildpack to the action:</p>
                <p><em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10 # This is the action<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: "YOUR APP's NAME" #Must be unique in Heroku<br>
                  heroku_email: "YOUR EMAIL"<br>
                  buildpack: "<a
                    href="https://github.com/HashNuke/heroku-buildpack-elixir.git">https://github.com/HashNuke/heroku-buildpack-elixir.git</a>"
                </p>
                <h3>Deploy Subdirectory</h3>
                <p>If you are using a complex application which has both frontend and backend applications in separate
                  folders, you can specify a path to the directory to deploy using the <strong>appdir</strong> option:
                </p>
                <p><em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10 # This is the action<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: "YOUR APP's NAME" #Must be unique in Heroku<br>
                  heroku_email: "YOUR EMAIL"<br>
                  appdir: "api" # &lt;- This will point to the api folder in your project</p>
                <p>Thanks to <a href="https://github.com/meszarosdezso">meszarosdezso</a> for adding the appdir feature
                </p>
                <h3>Deploy custom branch</h3>
                <p>You can use the <strong>branch</strong> option to deploy an app in another branch</p>
                <p><em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master # Changing the branch here would also work</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10 # This is the action<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: "YOUR APP's NAME" #Must be unique in Heroku<br>
                  heroku_email: "YOUR EMAIL"<br>
                  branch: "dev"</p>
                <p>Though this is also possible to do with GitHub Actions, click <a
                    href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#on">here</a>
                  for more information</p>
                <h3>Deploy custom remote branch</h3>
                <p>You can use the <strong>remote_branch</strong> option to deploy an app to another remote branch</p>
                <p><em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master # Changing the branch here would also work</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10 # This is the action<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: "YOUR APP's NAME" #Must be unique in Heroku<br>
                  heroku_email: "YOUR EMAIL"<br>
                  remote_branch: "main"</p>
                <p>Though this is also possible to do with GitHub Actions, click <a
                    href="https://docs.github.com/en/actions/reference/workflow-syntax-for-github-actions#on">here</a>
                  for more information</p>
                <h2>Health Check</h2>
                <p>Sometimes you will run into issues where the action has successfully deployed the project but because
                  of some error in code or the like, the Heroku App crashes or fails to launch. To counter this, you can
                  setup a healthcheck in the action:</p>
                <p><em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master # Changing the branch here would also work</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10 # This is the action<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: "YOUR APP's NAME" #Must be unique in Heroku<br>
                  heroku_email: "YOUR EMAIL"<br>
                  healthcheck: "https://[YOUR APP's NAME].herokuapp.com/health"</p>
                <p>Adding the url to the healthcheck option of the action will make the action attempt to perform a GET
                  Request to that url and print the response if successful. Else it will fail the action to indicate
                  that the deploy was not successful.</p>
                <p>P.S: It is recommended that you setup a specific route such as <strong>/health</strong> for
                  performing healthchecks</p>
                <h3>Advanced Usage</h3>
                <p>Additionally, if you are using a custom route for performing healthchecks, you can check for a
                  specific value from this url using the <strong>checkstring</strong> option of the action like so:</p>
                <p><em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master # Changing the branch here would also work</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10 # This is the action<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: "YOUR APP's NAME" #Must be unique in Heroku<br>
                  heroku_email: "YOUR EMAIL"<br>
                  healthcheck: "https://[YOUR APP's NAME].herokuapp.com/health"<br>
                  checkstring: "ok"</p>
                <p>This will essentially check if the value returned by sending a GET request to the
                  <strong>healthcheck</strong> url is equal to the <strong>checkstring</strong></p>
                <h3>Adding Delay</h3>
                <p>In some cases, a healthcheck ends up being performed before the application has been setup on Heroku.
                  To counter this, you can manually set the <strong>delay</strong> option in the action to make the
                  action wait a certain period of time (in seconds) before performing the healthcheck</p>
                <p><em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master # Changing the branch here would also work</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10 # This is the action<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: "YOUR APP's NAME" #Must be unique in Heroku<br>
                  heroku_email: "YOUR EMAIL"<br>
                  healthcheck: "https://[YOUR APP's NAME].herokuapp.com/health"<br>
                  checkstring: "ok"<br>
                  delay: 5</p>
                <p>By default, the delay will be 0 if you choose to not set it</p>
                <h3>Rollback on healthcheck failure</h3>
                <p>You can set the rollbackonhealthcheckfailed option to ensure that your application is rolled back if
                  the healthcheck fails. <em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master # Changing the branch here would also work</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10 # This is the action<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: "YOUR APP's NAME" #Must be unique in Heroku<br>
                  heroku_email: "YOUR EMAIL"<br>
                  healthcheck: "https://[YOUR APP's NAME].herokuapp.com/health"<br>
                  checkstring: "ok"<br>
                  rollbackonhealthcheckfailed: true</p>
                <p>By default, the application will not be rolled back if the healthcheck fails.</p>
                <p>Thanks to <a href="https://github.com/FridaTveit">FridaTveit</a> for adding this feature</p>
                <h2>Environment Variables</h2>
                <p>Heroku offers a means of passing sensitive information to your app (such as api keys etc) via
                  something it calls <strong>config vars</strong> which you can find in the settings of your heroku app.
                  But sometimes you might want to store sensitive information (api keys etc) in GitHub Secrets instead
                  just to ensure platform independence. If you choose to this, you can then pass those secrets to your
                  heroku app by using the "env" object of the action:-</p>
                <p><em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master # Changing the branch here would also work</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10 # This is the action<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: "YOUR APP's NAME" #Must be unique in Heroku<br>
                  heroku_email: "YOUR EMAIL"<br>
                  env:<br>
                  HD_FIREBASE_API_KEY: ${{secrets.FIREBASE_API_KEY}}<br>
                  HD_RANDOM_DATA: "Hello"</p>
                <p>Note that the variables must start with "<strong>HD_</strong>". This is is important so the action
                  can tell your environment variable apart from multiple other variables (passed by your language,
                  github actions etc) which you probably don't want sitting in your heroku app's config vars.</p>
                <p>On that note, if you've set these variables and have deployed your app, you can check your Heroku
                  App's config vars and you'll find that they have been set with the env variables you have passed.</p>
                <p><strong>PLEASE NOTE</strong>: The "<strong>HD_</strong>" will be scrapped from the variable your name
                  by the action. So in your project, "<strong>FIREBASE_API_KEY</strong>" will be passed instead of
                  "<strong>HD_FIREBASE_API_KEY</strong>" (for example) and you can see this if you check your Heroku
                  App's config vars. We understand that this can be confusing but this is again to ensure Platform
                  independence and so that you don't have to use HD_FIREBASE_API_KEY if you choose to stop using Heroku
                </p>
                <h3>ENV File</h3>
                <p>You can if you wish also pass the path to an env file (with respect to your appdir path) as an option
                  to the action. The action will then read that file and set the config vars accordingly in Heroku</p>
                <p><em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master # Changing the branch here would also work</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10 # This is the action<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: "YOUR APP's NAME" #Must be unique in Heroku<br>
                  heroku_email: "YOUR EMAIL"<br>
                  env_file: ".env"<br>
                  env:<br>
                  HD_FIREBASE_API_KEY: ${{secrets.FIREBASE_API_KEY}}<br>
                  HD_RANDOM_DATA: "Hello"</p>
                <p>Example env file</p>
                <pre><code>HELLO=world
WORLD=hello
</code></pre>
                <p>There are two important points to keep in mind when using the <strong>env_file</strong> option.</p>
                <ol>
                  <li>
                    <p>The first is that in can be used in conjunction with <strong>env</strong> option of the action as
                      you have seen above</p>
                  </li>
                  <li>
                    <p>The second is that unlike in the <strong>env</strong> option, you do not need to prefix the env
                      variables in the .env file with "HD_".</p>
                    <p>(For those of you who are wondering why this is the case, when using the <strong>env</strong>
                      option, the env variables are passed directly into the process along with all the other env
                      variables passed by GitHub Actions, the language you are using etc and the "HD_" in that case is
                      to help differentiate your env variables from them. But when using a file to pass the env
                      variables, the action manually reads the file so there is no chance of stray env variables being
                      passed by your language, github actions etc and hence no need to add the "HD_")</p>
                  </li>
                </ol>
                <p>Also note that using a file (which can be named anything so long as it follows the format of a
                  standard env file) can be useful if you're trying to send a very large number of env variables to
                  Heroku, it does mean that keeping the .env file secure and private is entirely in your hands so tread
                  with caution.</p>
                <h2>Procfile Passing</h2>
                <p>In some cases, you might want to be able to set the Procfile within the action itself instead of
                  declaring it manually in your project. Although this approach is not recommended in favor of just
                  using multiple branches, it might still be useful in some edge cases. You can set the Procfile in the
                  action by using the <strong>procfile</strong> option of the action like so:</p>
                <p><em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master # Changing the branch here would also work</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10 # This is the action<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: "YOUR APP's NAME" #Must be unique in Heroku<br>
                  heroku_email: "YOUR EMAIL"<br>
                  procfile: "web: npm start"</p>
                <p>Keep in mind this won't work if you are using Docker.</p>
                <h2>Deploying to a team</h2>
                <p>If you are an enterprise user and wish to deploy your app to a specific team, you can do so by just
                  passing the <strong>team</strong> option to the action:</p>
                <p><em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: "YOUR APP's NAME"<br>
                  heroku_email: "YOUR EMAIL"<br>
                  team: "THE TEAM's NAME"</p>
                <h2>Just Login</h2>
                <p>GitHub Actions does come with the heroku cli pre-installed (this is what is used by the Action to
                  deploy applications). So if you wish to use the heroku cli and just need to login, you can use the
                  <strong>justlogin</strong> option of the Heroku Deploy Action</p>
                <p><em>.github/workflows/main.yml</em></p>
                <p>name: Deploy</p>
                <p>on:<br>
                  push:<br>
                  branches:<br>
                  - master # Changing the branch here would also work</p>
                <p>jobs:<br>
                  build:<br>
                  runs-on: ubuntu-latest<br>
                  steps:<br>
                  - uses: actions/checkout@v2<br>
                  - uses: akhileshns/heroku-deploy@v3.11.10 # This is the action<br>
                  with:<br>
                  heroku_api_key: ${{secrets.HEROKU_API_KEY}}<br>
                  heroku_app_name: ""<br>
                  heroku_email: "YOUR EMAIL"<br>
                  justlogin: true<br>
                  - run: heroku auth:whoami</p>
                <h2>Important Notes</h2>
                <ul>
                  <li>
                    <p>You can check this repo's <a
                        href="https://github.com/AkhileshNS/heroku-deploy/blob/master/.github/workflows/main.yml"><em>.github/workflows/main.yml</em></a>
                      for example use cases of the action in use. Additionally the APIs for these use cases can be found
                      in the <a href="https://github.com/AkhileshNS/heroku-deploy/tree/master/tests"><em>tests</em></a>
                      folder of the repo</p>
                  </li>
                  <li>
                    <p>You can find the secrets tab in your project's settings</p>
                  </li>
                  <li>
                    <p>Be careful with your appname, cuz the action either deploys to an existing app or creates a new
                      one if it doesn't exist. So if you accidently change it after deploying it once already, the
                      action won't fail, it'll just create a new dyno and if you are on a paid plan, heroku can be
                      expensive. On that note, always check the logs of your actions to make sure everything is A-OK.
                    </p>
                  </li>
                  <li>
                    <p>If you're using the above exact workflow code, keep in mind that it deploys whenever you make a
                      change to the master branch (Even README updates which have nothing to do with application code)
                      and that might not be very efficient for you, have a look through the github actions docs to
                      customize when the action should trigger.</p>
                    <p>(I would recommend making a separate dev branch and setting up the action to trigger upon pull
                      request to the master branch)</p>
                  </li>
                  <li>
                    <p>By default, if you don't specify a branch in your action, it will default to the HEAD branch (or
                      whichever branch the action is defined under). So you might be wondering what happens if you
                      define the same action in a different branch under the same heroku app name (or which you try to
                      deploy to the same appname from a different branch)? The answer is that the new branch overrides
                      whatever your old branch was (even if the new branch is behind the old branch in terms of commits
                      unless you set dontuseforce to true)</p>
                  </li>
                  <li>
                    <p>For more info on how Heroku enables deployment using Docker, check out <a
                        href="https://www.heroku.com/deploy-with-docker"
                        rel="nofollow">https://www.heroku.com/deploy-with-docker</a></p>
                  </li>
                </ul>
                <h2>License</h2>
                <p>This project is licensed under the MIT License - see the <a
                    href="https://github.com/AkhileshNS/heroku-deploy/blob/master/LICENSE">LICENSE</a> file for details
                </p>
                <p><a href="https://github.com/marketplace/actions/deploy-to-heroku">Source</a></p>

                <div class="mt-8 mb-2 text-xs text-grey-darker">
                  Created 3 weeks ago |
                  Updated 3 weeks ago
                </div>

                <div>
                  <a class="text-xs no-underline text-blue"
                    href="https://gist.github.com/0d4010f180dbbe3e97b45b604317f6d7" target="_blank">View on GitHub</a>
                </div>
              </div>

              <div class="pt-4 mb-8">
                <h2 class="mb-2 text-2xl">Comments</h2>

                <form method="POST" class="flex flex-col mb-2 -mt-2 flex-end"
                  action="https://gistlog.co/comment/0d4010f180dbbe3e97b45b604317f6d7">
                  <input type="hidden" name="_token" value="abI2zOnZnZ4lK2hhXDpfWnEsePWz7XmLPaj0IDqr">
                  <label for="comment" class="hidden">Comment</label>
                  <textarea id="comment" name="comment"
                    class="w-full px-4 py-3 text-base border border-solid rounded text-grey border-grey"
                    placeholder="Join the discussion&hellip;" required></textarea>
                  <div class="flex justify-end flex-1">
                    <a class="btn-github" href="https://gistlog.co/auth/github">
                      <span class="w-6 mr-2 text-white fill-current">
                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 1024 1024"
                          enable-background="new 0 0 1024 1024" xml:space="preserve">
                          <path
                            d="M512 0C229.25 0 0 229.25 0 512c0 226.25 146.688 418.125 350.156 485.812 25.594 4.688 34.938-11.125 34.938-24.625 0-12.188-0.469-52.562-0.719-95.312C242 908.812 211.906 817.5 211.906 817.5c-23.312-59.125-56.844-74.875-56.844-74.875-46.531-31.75 3.53-31.125 3.53-31.125 51.406 3.562 78.47 52.75 78.47 52.75 45.688 78.25 119.875 55.625 149 42.5 4.654-33 17.904-55.625 32.5-68.375C304.906 725.438 185.344 681.5 185.344 485.312c0-55.938 19.969-101.562 52.656-137.406-5.219-13-22.844-65.094 5.062-135.562 0 0 42.938-13.75 140.812 52.5 40.812-11.406 84.594-17.031 128.125-17.219 43.5 0.188 87.312 5.875 128.188 17.281 97.688-66.312 140.688-52.5 140.688-52.5 28 70.531 10.375 122.562 5.125 135.5 32.812 35.844 52.625 81.469 52.625 137.406 0 196.688-119.75 240-233.812 252.688 18.438 15.875 34.75 47 34.75 94.75 0 68.438-0.688 123.625-0.688 140.5 0 13.625 9.312 29.562 35.25 24.562C877.438 930 1024 738.125 1024 512 1024 229.25 794.75 0 512 0z" />
                        </svg>
                      </span>
                      Sign in with GitHub
                    </a>
                  </div>
                </form>

                <gist-comments gist-author="bgoonz" gist-id="0d4010f180dbbe3e97b45b604317f6d7"></gist-comments>
              </div>
            </div>
          </article>
        </div>
      </div>
    </div>

    <div
      class="flex flex-col lg:flex-row bg-grey-darkest justify-center items-center text-xs md:text-sm text-white mt-4 py-4">
      <div>
        <a href="https://gistlog.co/" class="text-blue-lighter no-underline hover:text-white">GistLog</a>
        &copy; 2021
        <span class="hidden lg:inline-block">|&nbsp;</span>
      </div>

      <div>
        Brought to you by the lovely humans at
        <a href="https://tighten.co/" class="text-blue-lighter no-underline hover:text-white">Tighten</a>
      </div>
    </div>
  </div>

  <script src="https://gistlog.co/js/app.js"></script>
  <script>
    ( function () {
      autosize( document.querySelectorAll( 'textarea' ) );
    } )();
  </script>
  <script>
    ( function () {
      const alerts = document.querySelectorAll( '.js-auto_dismiss' );
      if ( typeof ( alerts ) !== undefined ) {
        alerts.forEach( ( el ) => setTimeout( () => fadeOut( el ), 4500 ) );
      }
    } )();

    function fadeOut( el ) {
      el.style.opacity = 1;
      ( function fade() {
        if ( ( el.style.opacity -= .1 ) < 0 ) {
          el.style.display = "none";
        } else {
          requestAnimationFrame( fade );
        }
      } )();
    }
  </script>
</body>


</html>
