/*! React InstantSearchCore 5.2.0-beta.2 | Â© Algolia, inc. | https://community.algolia.com/react-instantsearch */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e.ReactInstantSearchCore={},e.React)}(this,function(e,d){"use strict";var v="default"in d?d.default:d,t="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}var i=r,a=n;function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}"function"==typeof t.setTimeout&&(i=setTimeout),"function"==typeof t.clearTimeout&&(a=clearTimeout);var o,c=[],u=!1,f=-1;function l(){u&&o&&(u=!1,o.length?c=o.concat(c):f=-1,c.length&&h())}function h(){if(!u){var e=s(l);u=!0;for(var t=c.length;t;){for(o=c,c=[];++f<t;)o&&o[f].run();f=-1,t=c.length}o=null,u=!1,function(t){if(a===clearTimeout)return clearTimeout(t);if((a===n||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}p.prototype.run=function(){this.fun.apply(null,this.array)};function m(){}var g=m,y=m,b=m,R=m,x=m,F=m,_=m;var j=t.performance||{},P=j.now||j.mozNow||j.msNow||j.oNow||j.webkitNow||function(){return(new Date).getTime()};var w=new Date;var O={nextTick:function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||u||s(h)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:g,addListener:y,once:b,off:R,removeListener:x,removeAllListeners:F,emit:_,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*P.call(j),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-w)/1e3}},E="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function S(e,t){return e(t={exports:{}},t.exports),t.exports}function A(e){return function(){return e}}var T=function(){};T.thatReturns=A,T.thatReturnsFalse=A(!1),T.thatReturnsTrue=A(!0),T.thatReturnsNull=A(null),T.thatReturnsThis=function(){return this},T.thatReturnsArgument=function(e){return e};var N=T;var C=function(e,t,r,n,i,a,s,o){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,i,a,s,o],f=0;(c=new Error(t.replace(/%s/g,function(){return u[f++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}},I=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}})()&&Object.assign;var D=S(function(e){e.exports=function(){function e(e,t,r,n,i,a){"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a&&C(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}var r={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return r.checkPropTypes=N,r.PropTypes=r}()});var M=function(){this.__data__=[],this.size=0};var L=function(e,t){return e===t||e!=e&&t!=t};var B=function(e,t){for(var r=e.length;r--;)if(L(e[r][0],t))return r;return-1},k=Array.prototype.splice;var U=function(e){var t=this.__data__,r=B(t,e);return!(r<0||(r==t.length-1?t.pop():k.call(t,r,1),--this.size,0))};var q=function(e){var t=this.__data__,r=B(t,e);return r<0?void 0:t[r][1]};var V=function(e){return-1<B(this.__data__,e)};var z=function(e,t){var r=this.__data__,n=B(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function W(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}W.prototype.clear=M,W.prototype.delete=U,W.prototype.get=q,W.prototype.has=V,W.prototype.set=z;var $=W;var K=function(){this.__data__=new $,this.size=0};var J=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var Y=function(e){return this.__data__.get(e)};var G=function(e){return this.__data__.has(e)},Z="object"==typeof E&&E&&E.Object===Object&&E,X="object"==typeof self&&self&&self.Object===Object&&self,ee=Z||X||Function("return this")(),te=ee.Symbol,re=Object.prototype,ne=re.hasOwnProperty,ie=re.toString,ae=te?te.toStringTag:void 0;var se=function(e){var t=ne.call(e,ae),r=e[ae];try{e[ae]=void 0}catch(e){}var n=ie.call(e);return t?e[ae]=r:delete e[ae],n},oe=Object.prototype.toString;var ce=function(e){return oe.call(e)},ue=te?te.toStringTag:void 0;var fe=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ue&&ue in Object(e)?se(e):ce(e)};var le=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var he,pe=function(e){if(!le(e))return!1;var t=fe(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},de=ee["__core-js_shared__"],ve=(he=/[^.]+$/.exec(de&&de.keys&&de.keys.IE_PROTO||""))?"Symbol(src)_1."+he:"";var me=function(e){return!!ve&&ve in e},ge=Function.prototype.toString;var ye=function(e){if(null!=e){try{return ge.call(e)}catch(e){}try{return e+""}catch(e){}}return""},be=/^\[object .+?Constructor\]$/,Re=Function.prototype,xe=Object.prototype,Fe=Re.toString,_e=xe.hasOwnProperty,je=RegExp("^"+Fe.call(_e).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Pe=function(e){return!(!le(e)||me(e))&&(pe(e)?je:be).test(ye(e))};var we=function(e,t){return null==e?void 0:e[t]};var Se=function(e,t){var r=we(e,t);return Pe(r)?r:void 0},Oe=Se(ee,"Map"),Ee=Se(Object,"create");var Ae=function(){this.__data__=Ee?Ee(null):{},this.size=0};var Te=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ne=Object.prototype.hasOwnProperty;var Ce=function(e){var t=this.__data__;if(Ee){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Ne.call(t,e)?t[e]:void 0},Ie=Object.prototype.hasOwnProperty;var He=function(e){var t=this.__data__;return Ee?void 0!==t[e]:Ie.call(t,e)};var Qe=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ee&&void 0===t?"__lodash_hash_undefined__":t,this};function De(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}De.prototype.clear=Ae,De.prototype.delete=Te,De.prototype.get=Ce,De.prototype.has=He,De.prototype.set=Qe;var Me=De;var Le=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Be=function(e,t){var r=e.__data__;return Le(t)?r["string"==typeof t?"string":"hash"]:r.map};var ke=function(e){var t=Be(this,e).delete(e);return this.size-=t?1:0,t};var Ue=function(e){return Be(this,e).get(e)};var qe=function(e){return Be(this,e).has(e)};var Ve=function(e,t){var r=Be(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function ze(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ze.prototype.clear=function(){this.size=0,this.__data__={hash:new Me,map:new(Oe||$),string:new Me}},ze.prototype.delete=ke,ze.prototype.get=Ue,ze.prototype.has=qe,ze.prototype.set=Ve;var We=ze;var $e=function(e,t){var r=this.__data__;if(r instanceof $){var n=r.__data__;if(!Oe||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new We(n)}return r.set(e,t),this.size=r.size,this};function Ke(e){var t=this.__data__=new $(e);this.size=t.size}Ke.prototype.clear=K,Ke.prototype.delete=J,Ke.prototype.get=Y,Ke.prototype.has=G,Ke.prototype.set=$e;var Je=Ke;var Ye=function(e){return this.__data__.has(e)};function Ge(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new We;++t<r;)this.add(e[t])}Ge.prototype.add=Ge.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ge.prototype.has=Ye;var Ze=Ge;var Xe=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var et=function(e,t){return e.has(t)};var tt=function(e,t,r,n,i,a){var s=1&r,o=e.length,c=t.length;if(o!=c&&!(s&&o<c))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var f=-1,l=!0,h=2&r?new Ze:void 0;for(a.set(e,t),a.set(t,e);++f<o;){var p=e[f],d=t[f];if(n)var v=s?n(d,p,f,t,e,a):n(p,d,f,e,t,a);if(void 0!==v){if(v)continue;l=!1;break}if(h){if(!Xe(t,function(e,t){if(!et(h,t)&&(p===e||i(p,e,r,n,a)))return h.push(t)})){l=!1;break}}else if(p!==d&&!i(p,d,r,n,a)){l=!1;break}}return a.delete(e),a.delete(t),l},rt=ee.Uint8Array;var nt=function(e){var r=-1,n=Array(e.size);return e.forEach(function(e,t){n[++r]=[t,e]}),n};var it=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},at=te?te.prototype:void 0,st=at?at.valueOf:void 0;var ot=function(e,t,r,n,i,a,s){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new rt(e),new rt(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return L(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=nt;case"[object Set]":var c=1&n;if(o||(o=it),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=2,s.set(e,t);var f=tt(o(e),o(t),n,i,a,s);return s.delete(e),f;case"[object Symbol]":if(st)return st.call(e)==st.call(t)}return!1};var ct=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e},ut=Array.isArray;var ft=function(e,t,r){var n=t(e);return ut(e)?n:ct(n,r(e))};var lt=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var s=e[r];t(s,r,e)&&(a[i++]=s)}return a};var ht=function(){return[]},pt=Object.prototype.propertyIsEnumerable,dt=Object.getOwnPropertySymbols,vt=dt?function(t){return null==t?[]:(t=Object(t),lt(dt(t),function(e){return pt.call(t,e)}))}:ht;var mt=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var gt=function(e){return null!=e&&"object"==typeof e};var yt=function(e){return gt(e)&&"[object Arguments]"==fe(e)},bt=Object.prototype,Rt=bt.hasOwnProperty,xt=bt.propertyIsEnumerable,Ft=yt(function(){return arguments}())?yt:function(e){return gt(e)&&Rt.call(e,"callee")&&!xt.call(e,"callee")};var _t=function(){return!1},jt=S(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?ee.Buffer:void 0,a=(i?i.isBuffer:void 0)||_t;e.exports=a}),Pt=/^(?:0|[1-9]\d*)$/;var wt=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Pt.test(e))&&-1<e&&e%1==0&&e<t};var St=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991},Ot={};Ot["[object Float32Array]"]=Ot["[object Float64Array]"]=Ot["[object Int8Array]"]=Ot["[object Int16Array]"]=Ot["[object Int32Array]"]=Ot["[object Uint8Array]"]=Ot["[object Uint8ClampedArray]"]=Ot["[object Uint16Array]"]=Ot["[object Uint32Array]"]=!0,Ot["[object Arguments]"]=Ot["[object Array]"]=Ot["[object ArrayBuffer]"]=Ot["[object Boolean]"]=Ot["[object DataView]"]=Ot["[object Date]"]=Ot["[object Error]"]=Ot["[object Function]"]=Ot["[object Map]"]=Ot["[object Number]"]=Ot["[object Object]"]=Ot["[object RegExp]"]=Ot["[object Set]"]=Ot["[object String]"]=Ot["[object WeakMap]"]=!1;var Et=function(e){return gt(e)&&St(e.length)&&!!Ot[fe(e)]};var At=function(t){return function(e){return t(e)}},Tt=S(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r&&Z.process,a=function(){try{return i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}),Nt=Tt&&Tt.isTypedArray,Ct=Nt?At(Nt):Et,It=Object.prototype.hasOwnProperty;var Ht=function(e,t){var r=ut(e),n=!r&&Ft(e),i=!r&&!n&&jt(e),a=!r&&!n&&!i&&Ct(e),s=r||n||i||a,o=s?mt(e.length,String):[],c=o.length;for(var u in e)!t&&!It.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||wt(u,c))||o.push(u);return o},Qt=Object.prototype;var Dt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Qt)};var Mt=function(t,r){return function(e){return t(r(e))}},Lt=Mt(Object.keys,Object),Bt=Object.prototype.hasOwnProperty;var kt=function(e){if(!Dt(e))return Lt(e);var t=[];for(var r in Object(e))Bt.call(e,r)&&"constructor"!=r&&t.push(r);return t};var Ut=function(e){return null!=e&&St(e.length)&&!pe(e)};var qt=function(e){return Ut(e)?Ht(e):kt(e)};var Vt=function(e){return ft(e,qt,vt)},zt=Object.prototype.hasOwnProperty;var Wt=function(e,t,r,n,i,a){var s=1&r,o=Vt(e),c=o.length;if(c!=Vt(t).length&&!s)return!1;for(var u=c;u--;){var f=o[u];if(!(s?f in t:zt.call(t,f)))return!1}var l=a.get(e);if(l&&a.get(t))return l==t;var h=!0;a.set(e,t),a.set(t,e);for(var p=s;++u<c;){var d=e[f=o[u]],v=t[f];if(n)var m=s?n(v,d,f,t,e,a):n(d,v,f,e,t,a);if(!(void 0===m?d===v||i(d,v,r,n,a):m)){h=!1;break}p||(p="constructor"==f)}if(h&&!p){var g=e.constructor,y=t.constructor;g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y)&&(h=!1)}return a.delete(e),a.delete(t),h},$t=Se(ee,"DataView"),Kt=Se(ee,"Promise"),Jt=Se(ee,"Set"),Yt=Se(ee,"WeakMap"),Gt="[object Map]",Zt="[object Promise]",Xt="[object Set]",er="[object WeakMap]",tr="[object DataView]",rr=ye($t),nr=ye(Oe),ir=ye(Kt),ar=ye(Jt),sr=ye(Yt),or=fe;($t&&or(new $t(new ArrayBuffer(1)))!=tr||Oe&&or(new Oe)!=Gt||Kt&&or(Kt.resolve())!=Zt||Jt&&or(new Jt)!=Xt||Yt&&or(new Yt)!=er)&&(or=function(e){var t=fe(e),r="[object Object]"==t?e.constructor:void 0,n=r?ye(r):"";if(n)switch(n){case rr:return tr;case nr:return Gt;case ir:return Zt;case ar:return Xt;case sr:return er}return t});var cr=or,ur="[object Arguments]",fr="[object Array]",lr="[object Object]",hr=Object.prototype.hasOwnProperty;var pr=function(e,t,r,n,i,a){var s=ut(e),o=ut(t),c=s?fr:cr(e),u=o?fr:cr(t),f=(c=c==ur?lr:c)==lr,l=(u=u==ur?lr:u)==lr,h=c==u;if(h&&jt(e)){if(!jt(t))return!1;f=!(s=!0)}if(h&&!f)return a||(a=new Je),s||Ct(e)?tt(e,t,r,n,i,a):ot(e,t,c,r,n,i,a);if(!(1&r)){var p=f&&hr.call(e,"__wrapped__"),d=l&&hr.call(t,"__wrapped__");if(p||d){var v=p?e.value():e,m=d?t.value():t;return a||(a=new Je),i(v,m,r,n,a)}}return!!h&&(a||(a=new Je),Wt(e,t,r,n,i,a))};var dr=function e(t,r,n,i,a){return t===r||(null==t||null==r||!gt(t)&&!gt(r)?t!=t&&r!=r:pr(t,r,n,i,e,a))};var vr=function(e,t,r,n){var i=r.length,a=i,s=!n;if(null==e)return!a;for(e=Object(e);i--;){var o=r[i];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<a;){var c=(o=r[i])[0],u=e[c],f=o[1];if(s&&o[2]){if(void 0===u&&!(c in e))return!1}else{var l=new Je;if(n)var h=n(u,f,c,e,t,l);if(!(void 0===h?dr(f,u,3,n,l):h))return!1}}return!0};var mr=function(e){return e==e&&!le(e)};var gr=function(e){for(var t=qt(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,mr(i)]}return t};var yr=function(t,r){return function(e){return null!=e&&e[t]===r&&(void 0!==r||t in Object(e))}};var br=function(t){var r=gr(t);return 1==r.length&&r[0][2]?yr(r[0][0],r[0][1]):function(e){return e===t||vr(e,t,r)}};var Rr=function(e){return"symbol"==typeof e||gt(e)&&"[object Symbol]"==fe(e)},xr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fr=/^\w*$/;var _r=function(e,t){if(ut(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Rr(e))||Fr.test(e)||!xr.test(e)||null!=t&&e in Object(t)},jr="Expected a function";function Pr(i,a){if("function"!=typeof i||null!=a&&"function"!=typeof a)throw new TypeError(jr);var s=function(){var e=arguments,t=a?a.apply(this,e):e[0],r=s.cache;if(r.has(t))return r.get(t);var n=i.apply(this,e);return s.cache=r.set(t,n)||r,n};return s.cache=new(Pr.Cache||We),s}Pr.Cache=We;var wr=Pr;var Sr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Or=/\\(\\)?/g,Er=function(e){var t=wr(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}(function(e){var i=[];return 46===e.charCodeAt(0)&&i.push(""),e.replace(Sr,function(e,t,r,n){i.push(r?n.replace(Or,"$1"):t||e)}),i});var Ar=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i},Tr=1/0,Nr=te?te.prototype:void 0,Cr=Nr?Nr.toString:void 0;var Ir=function e(t){if("string"==typeof t)return t;if(ut(t))return Ar(t,e)+"";if(Rr(t))return Cr?Cr.call(t):"";var r=t+"";return"0"==r&&1/t==-Tr?"-0":r};var Hr=function(e){return null==e?"":Ir(e)};var Qr=function(e,t){return ut(e)?e:_r(e,t)?[e]:Er(Hr(e))};var Dr=function(e){if("string"==typeof e||Rr(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};var Mr=function(e,t){for(var r=0,n=(t=Qr(t,e)).length;null!=e&&r<n;)e=e[Dr(t[r++])];return r&&r==n?e:void 0};var Lr=function(e,t,r){var n=null==e?void 0:Mr(e,t);return void 0===n?r:n};var Br=function(e,t){return null!=e&&t in Object(e)};var kr=function(e,t,r){for(var n=-1,i=(t=Qr(t,e)).length,a=!1;++n<i;){var s=Dr(t[n]);if(!(a=null!=e&&r(e,s)))break;e=e[s]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&St(i)&&wt(s,i)&&(ut(e)||Ft(e))};var Ur=function(e,t){return null!=e&&kr(e,t,Br)};var qr=function(r,n){return _r(r)&&mr(n)?yr(Dr(r),n):function(e){var t=Lr(e,r);return void 0===t&&t===n?Ur(e,r):dr(n,t,3)}};var Vr=function(e){return e};var zr=function(t){return function(e){return null==e?void 0:e[t]}};var Wr=function(t){return function(e){return Mr(e,t)}};var $r=function(e){return _r(e)?zr(Dr(e)):Wr(e)};var Kr=function(e){return"function"==typeof e?e:null==e?Vr:"object"==typeof e?ut(e)?qr(e[0],e[1]):br(e):$r(e)};var Jr=function(s){return function(e,t,r){var n=Object(e);if(!Ut(e)){var i=Kr(t,3);e=qt(e),t=function(e){return i(n[e],e,n)}}var a=s(e,t,r);return-1<a?n[i?e[a]:a]:void 0}};var Yr=function(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1},Gr=/^\s+|\s+$/g,Zr=/^[-+]0x[0-9a-f]+$/i,Xr=/^0b[01]+$/i,en=/^0o[0-7]+$/i,tn=parseInt;var rn=function(e){if("number"==typeof e)return e;if(Rr(e))return NaN;if(le(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=le(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Gr,"");var r=Xr.test(e);return r||en.test(e)?tn(e.slice(2),r?2:8):Zr.test(e)?NaN:+e};var nn=function(e){return e?(e=rn(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0};var an=function(e){var t=nn(e),r=t%1;return t==t?r?t-r:t:0},sn=Math.max;var on=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:an(r);return i<0&&(i=sn(n+i,0)),Yr(e,Kr(t,3),i)},cn=Jr(on),un=Object.prototype.hasOwnProperty;var fn=function(e){if(null==e)return!0;if(Ut(e)&&(ut(e)||"string"==typeof e||"function"==typeof e.splice||jt(e)||Ct(e)||Ft(e)))return!e.length;var t=cr(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Dt(e))return!kt(e).length;for(var r in e)if(un.call(e,r))return!1;return!0};var ln=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},hn=function(){try{var e=Se(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var pn=function(e,t,r){"__proto__"==t&&hn?hn(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},dn=Object.prototype.hasOwnProperty;var vn=function(e,t,r){var n=e[t];dn.call(e,t)&&L(n,r)&&(void 0!==r||t in e)||pn(e,t,r)};var mn=function(e,t,r,n){var i=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var o=t[a],c=n?n(r[o],e[o],o,r,e):void 0;void 0===c&&(c=e[o]),i?pn(r,o,c):vn(r,o,c)}return r};var gn=function(e,t){return e&&mn(t,qt(t),e)};var yn=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},bn=Object.prototype.hasOwnProperty;var Rn=function(e){if(!le(e))return yn(e);var t=Dt(e),r=[];for(var n in e)("constructor"!=n||!t&&bn.call(e,n))&&r.push(n);return r};var xn=function(e){return Ut(e)?Ht(e,!0):Rn(e)};var Fn=function(e,t){return e&&mn(t,xn(t),e)},_n=S(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?ee.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}});var jn=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t};var Pn=function(e,t){return mn(e,vt(e),t)},wn=Mt(Object.getPrototypeOf,Object),Sn=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)ct(t,vt(e)),e=wn(e);return t}:ht;var On=function(e,t){return mn(e,Sn(e),t)};var En=function(e){return ft(e,xn,Sn)},An=Object.prototype.hasOwnProperty;var Tn=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&An.call(e,"index")&&(r.index=e.index,r.input=e.input),r};var Nn=function(e){var t=new e.constructor(e.byteLength);return new rt(t).set(new rt(e)),t};var Cn=function(e,t){var r=t?Nn(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},In=/\w*$/;var Hn=function(e){var t=new e.constructor(e.source,In.exec(e));return t.lastIndex=e.lastIndex,t},Qn=te?te.prototype:void 0,Dn=Qn?Qn.valueOf:void 0;var Mn=function(e){return Dn?Object(Dn.call(e)):{}};var Ln=function(e,t){var r=t?Nn(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var Bn=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return Nn(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return Cn(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ln(e,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return Hn(e);case"[object Set]":return new n;case"[object Symbol]":return Mn(e)}},kn=Object.create,Un=function(){function r(){}return function(e){if(!le(e))return{};if(kn)return kn(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}();var qn=function(e){return"function"!=typeof e.constructor||Dt(e)?{}:Un(wn(e))};var Vn=function(e){return gt(e)&&"[object Map]"==cr(e)},zn=Tt&&Tt.isMap,Wn=zn?At(zn):Vn;var $n=function(e){return gt(e)&&"[object Set]"==cr(e)},Kn=Tt&&Tt.isSet,Jn=Kn?At(Kn):$n,Yn=1,Gn=2,Zn=4,Xn="[object Arguments]",ei="[object Function]",ti="[object GeneratorFunction]",ri="[object Object]",ni={};ni[Xn]=ni["[object Array]"]=ni["[object ArrayBuffer]"]=ni["[object DataView]"]=ni["[object Boolean]"]=ni["[object Date]"]=ni["[object Float32Array]"]=ni["[object Float64Array]"]=ni["[object Int8Array]"]=ni["[object Int16Array]"]=ni["[object Int32Array]"]=ni["[object Map]"]=ni["[object Number]"]=ni[ri]=ni["[object RegExp]"]=ni["[object Set]"]=ni["[object String]"]=ni["[object Symbol]"]=ni["[object Uint8Array]"]=ni["[object Uint8ClampedArray]"]=ni["[object Uint16Array]"]=ni["[object Uint32Array]"]=!0,ni["[object Error]"]=ni[ei]=ni["[object WeakMap]"]=!1;var ii=function r(n,i,a,e,t,s){var o,c=i&Yn,u=i&Gn,f=i&Zn;if(a&&(o=t?a(n,e,t,s):a(n)),void 0!==o)return o;if(!le(n))return n;var l=ut(n);if(l){if(o=Tn(n),!c)return jn(n,o)}else{var h=cr(n),p=h==ei||h==ti;if(jt(n))return _n(n,c);if(h==ri||h==Xn||p&&!t){if(o=u||p?{}:qn(n),!c)return u?On(n,Fn(o,n)):Pn(n,gn(o,n))}else{if(!ni[h])return t?n:{};o=Bn(n,h,c)}}s||(s=new Je);var d=s.get(n);if(d)return d;if(s.set(n,o),Jn(n))return n.forEach(function(e){o.add(r(e,i,a,e,n,s))}),o;if(Wn(n))return n.forEach(function(e,t){o.set(t,r(e,i,a,t,n,s))}),o;var v=f?u?En:Vt:u?keysIn:qt,m=l?void 0:v(n);return ln(m||n,function(e,t){m&&(e=n[t=e]),vn(o,t,r(e,i,a,t,n,s))}),o};var ai=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var si=function(e,t,r){var n=-1,i=e.length;t<0&&(t=i<-t?0:i+t),(r=i<r?i:r)<0&&(r+=i),i=r<t?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a};var oi=function(e,t){return t.length<2?e:Mr(e,si(t,0,-1))};var ci=function(e,t){return t=Qr(t,e),null==(e=oi(e,t))||delete e[Dr(ai(t))]},ui=Function.prototype,fi=Object.prototype,li=ui.toString,hi=fi.hasOwnProperty,pi=li.call(Object);var di=function(e){if(!gt(e)||"[object Object]"!=fe(e))return!1;var t=wn(e);if(null===t)return!0;var r=hi.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&li.call(r)==pi};var vi=function(e){return di(e)?void 0:e},mi=te?te.isConcatSpreadable:void 0;var gi=function(e){return ut(e)||Ft(e)||!!(mi&&e&&e[mi])};var yi=function e(t,r,n,i,a){var s=-1,o=t.length;for(n||(n=gi),a||(a=[]);++s<o;){var c=t[s];0<r&&n(c)?1<r?e(c,r-1,n,i,a):ct(a,c):i||(a[a.length]=c)}return a};var bi=function(e){return null!=e&&e.length?yi(e,1):[]};var Ri=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},xi=Math.max;var Fi=function(a,s,o){return s=xi(void 0===s?a.length-1:s,0),function(){for(var e=arguments,t=-1,r=xi(e.length-s,0),n=Array(r);++t<r;)n[t]=e[s+t];t=-1;for(var i=Array(s+1);++t<s;)i[t]=e[t];return i[s]=o(n),Ri(a,this,i)}};var _i=function(e){return function(){return e}},ji=hn?function(e,t){return hn(e,"toString",{configurable:!0,enumerable:!1,value:_i(t),writable:!0})}:Vr,Pi=Date.now;var wi=function(r){var n=0,i=0;return function(){var e=Pi(),t=16-(e-i);if(i=e,0<t){if(800<=++n)return arguments[0]}else n=0;return r.apply(void 0,arguments)}},Si=wi(ji);var Oi=function(e){return Si(Fi(e,void 0,bi),e+"")},Ei=Oi(function(t,e){var r={};if(null==t)return r;var n=!1;e=Ar(e,function(e){return e=Qr(e,t),n||(n=1<e.length),e}),mn(t,En(t),r),n&&(r=ii(r,7,vi));for(var i=e.length;i--;)ci(r,e[i]);return r});var Ai=function(e){return e!=e};var Ti=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1};var Ni=function(e,t,r){return t==t?Ti(e,t,r):Yr(e,Ai,r)};var Ci=function(e,t){return!(null==e||!e.length)&&-1<Ni(e,t,0)};var Ii=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1},Hi=Math.min;var Qi=function(e,t,r){for(var n=r?Ii:Ci,i=e[0].length,a=e.length,s=a,o=Array(a),c=1/0,u=[];s--;){var f=e[s];s&&t&&(f=Ar(f,At(t))),c=Hi(f.length,c),o[s]=!r&&(t||120<=i&&120<=f.length)?new Ze(s&&f):void 0}f=e[0];var l=-1,h=o[0];e:for(;++l<i&&u.length<c;){var p=f[l],d=t?t(p):p;if(p=r||0!==p?p:0,!(h?et(h,d):n(u,d,r))){for(s=a;--s;){var v=o[s];if(!(v?et(v,d):n(e[s],d,r)))continue e}h&&h.push(d),u.push(p)}}return u};var Di=function(e,t){return Si(Fi(e,t,Vr),e+"")};var Mi=function(e){return gt(e)&&Ut(e)};var Li=function(e){return Mi(e)?e:[]},Bi=Di(function(e){var t=Ar(e,Li);return t.length&&t[0]===e[0]?Qi(t):[]});var ki=function(c){return function(e,t,r){for(var n=-1,i=Object(e),a=r(e),s=a.length;s--;){var o=a[c?s:++n];if(!1===t(i[o],o,i))break}return e}}();var Ui=function(e,t){return e&&ki(e,t,qt)};var qi=function(e){return"function"==typeof e?e:Vr};var Vi=function(e,t){return e&&Ui(e,qi(t))};var zi=function(a,s){return function(e,t){if(null==e)return e;if(!Ut(e))return a(e,t);for(var r=e.length,n=s?r:-1,i=Object(e);(s?n--:++n<r)&&!1!==t(i[n],n,i););return e}}(Ui);var Wi=function(e,t){return(ut(e)?ln:zi)(e,qi(t))};var $i=function(e,n){var i=[];return zi(e,function(e,t,r){n(e,t,r)&&i.push(e)}),i};var Ki=function(e,t){return(ut(e)?lt:$i)(e,Kr(t,3))};var Ji=function(e,n){var i=-1,a=Ut(e)?Array(e.length):[];return zi(e,function(e,t,r){a[++i]=n(e,t,r)}),a};var Yi=function(e,t){return(ut(e)?Ar:Ji)(e,Kr(t,3))};var Gi=function(e,t,r,n){var i=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r};var Zi=function(e,n,i,a,t){return t(e,function(e,t,r){i=a?(a=!1,e):n(i,e,t,r)}),i};var Xi=function(e,t,r){var n=ut(e)?Gi:Zi,i=arguments.length<3;return n(e,Kr(t,4),r,i,zi)},ea=Math.max;var ta=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:an(r);return i<0&&(i=ea(n+i,0)),Ni(e,t,i)};var ra=function(e){return"number"==typeof e||gt(e)&&"[object Number]"==fe(e)};var na=function(e){return ra(e)&&e!=+e};var ia=function(e,t){return dr(e,t)};var aa=function(e){return void 0===e};var sa=function(e){return"string"==typeof e||!ut(e)&&gt(e)&&"[object String]"==fe(e)};var oa=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&n<=r?e:si(e,t,r)};var ca=function(e,t){for(var r=e.length;r--&&-1<Ni(t,e[r],0););return r};var ua=function(e,t){for(var r=-1,n=e.length;++r<n&&-1<Ni(t,e[r],0););return r};var fa=function(e){return e.split("")},la=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var ha=function(e){return la.test(e)},pa="\\ud800-\\udfff",da="["+pa+"]",va="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ma="\\ud83c[\\udffb-\\udfff]",ga="[^"+pa+"]",ya="(?:\\ud83c[\\udde6-\\uddff]){2}",ba="[\\ud800-\\udbff][\\udc00-\\udfff]",Ra="(?:"+va+"|"+ma+")"+"?",xa="[\\ufe0e\\ufe0f]?",Fa=xa+Ra+("(?:\\u200d(?:"+[ga,ya,ba].join("|")+")"+xa+Ra+")*"),_a="(?:"+[ga+va+"?",va,ya,ba,da].join("|")+")",ja=RegExp(ma+"(?="+ma+")|"+_a+Fa,"g");var Pa=function(e){return e.match(ja)||[]};var wa=function(e){return ha(e)?Pa(e):fa(e)},Sa=/^\s+|\s+$/g;var Oa=function(e,t,r){if((e=Hr(e))&&(r||void 0===t))return e.replace(Sa,"");if(!e||!(t=Ir(t)))return e;var n=wa(e),i=wa(t),a=ua(n,i),s=ca(n,i)+1;return oa(n,a,s).join("")};var Ea=function(e,t,r){if(!le(r))return!1;var n=typeof t;return!!("number"==n?Ut(r)&&wt(t,r.length):"string"==n&&t in r)&&L(r[t],e)},Aa=Object.prototype,Ta=Aa.hasOwnProperty,Na=Di(function(e,t){e=Object(e);var r=-1,n=t.length,i=2<n?t[2]:void 0;for(i&&Ea(t[0],t[1],i)&&(n=1);++r<n;)for(var a=t[r],s=xn(a),o=-1,c=s.length;++o<c;){var u=s[o],f=e[u];(void 0===f||L(f,Aa[u])&&!Ta.call(e,u))&&(e[u]=a[u])}return e});var Ca=function(e,t,r){(void 0===r||L(e[t],r))&&(void 0!==r||t in e)||pn(e,t,r)};var Ia=function(e,t){return"__proto__"==t?void 0:e[t]};var Ha=function(e){return mn(e,xn(e))};var Qa=function(e,t,r,n,i,a,s){var o=Ia(e,r),c=Ia(t,r),u=s.get(c);if(u)Ca(e,r,u);else{var f=a?a(o,c,r+"",e,t,s):void 0,l=void 0===f;if(l){var h=ut(c),p=!h&&jt(c),d=!h&&!p&&Ct(c);f=c,h||p||d?f=ut(o)?o:Mi(o)?jn(o):p?_n(c,!(l=!1)):d?Ln(c,!(l=!1)):[]:di(c)||Ft(c)?Ft(f=o)?f=Ha(o):(!le(o)||n&&pe(o))&&(f=qn(c)):l=!1}l&&(s.set(c,f),i(f,c,n,a,s),s.delete(c)),Ca(e,r,f)}};var Da=function n(i,a,s,o,c){i!==a&&ki(a,function(e,t){if(le(e))c||(c=new Je),Qa(i,a,t,s,n,o,c);else{var r=o?o(Ia(i,t),e,t+"",i,a,c):void 0;void 0===r&&(r=e),Ca(i,t,r)}},xn)};var Ma=function(o){return Di(function(e,t){var r=-1,n=t.length,i=1<n?t[n-1]:void 0,a=2<n?t[2]:void 0;for(i=3<o.length&&"function"==typeof i?(n--,i):void 0,a&&Ea(t[0],t[1],a)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var s=t[r];s&&o(e,s,r,i)}return e})}(function(e,t,r){Da(e,t,r)});var La=function e(t){if(ra(t))return t;if(sa(t))return parseFloat(t);if(Array.isArray(t))return Yi(t,e);throw new Error("The value should be a number, a parseable string or an array of those.")};var Ba=function(r,e){var n={},t=Ki(e,function(e){return-1!==e.indexOf("attribute:")}),i=Yi(t,function(e){return e.split(":")[1]});-1===ta(i,"*")?Wi(i,function(e){r.isConjunctiveFacet(e)&&r.isFacetRefined(e)&&(n.facetsRefinements||(n.facetsRefinements={}),n.facetsRefinements[e]=r.facetsRefinements[e]),r.isDisjunctiveFacet(e)&&r.isDisjunctiveFacetRefined(e)&&(n.disjunctiveFacetsRefinements||(n.disjunctiveFacetsRefinements={}),n.disjunctiveFacetsRefinements[e]=r.disjunctiveFacetsRefinements[e]),r.isHierarchicalFacet(e)&&r.isHierarchicalFacetRefined(e)&&(n.hierarchicalFacetsRefinements||(n.hierarchicalFacetsRefinements={}),n.hierarchicalFacetsRefinements[e]=r.hierarchicalFacetsRefinements[e]);var t=r.getNumericRefinements(e);fn(t)||(n.numericRefinements||(n.numericRefinements={}),n.numericRefinements[e]=r.numericRefinements[e])}):(fn(r.numericRefinements)||(n.numericRefinements=r.numericRefinements),fn(r.facetsRefinements)||(n.facetsRefinements=r.facetsRefinements),fn(r.disjunctiveFacetsRefinements)||(n.disjunctiveFacetsRefinements=r.disjunctiveFacetsRefinements),fn(r.hierarchicalFacetsRefinements)||(n.hierarchicalFacetsRefinements=r.hierarchicalFacetsRefinements));var a=Ki(e,function(e){return-1===e.indexOf("attribute:")});return Wi(a,function(e){n[e]=r[e]}),n},ka={addRefinement:function(e,t,r){if(ka.isRefined(e,t,r))return e;var n=""+r,i=e[t]?e[t].concat(n):[n],a={};return a[t]=i,Na({},a,e)},removeRefinement:function(e,r,t){if(aa(t))return ka.clearRefinement(e,r);var n=""+t;return ka.clearRefinement(e,function(e,t){return r===t&&n===e})},toggleRefinement:function(e,t,r){if(aa(r))throw new Error("toggleRefinement should be used with a value");return ka.isRefined(e,t,r)?ka.removeRefinement(e,t,r):ka.addRefinement(e,t,r)},clearRefinement:function(e,i,a){if(aa(i))return fn(e)?e:{};if(sa(i))return fn(e[i])?e:Ei(e,i);if(pe(i)){var s=!1,t=Xi(e,function(e,t,r){var n=Ki(t,function(e){return!i(e,r,a)});return fn(n)?s=!0:(n.length!==t.length&&(s=!0),e[r]=n),e},{});return s?t:e}},isRefined:function(e,t,r){var n=ta,i=!!e[t]&&0<e[t].length;if(aa(r)||!i)return i;var a=""+r;return-1!==n(e[t],a)}},Ua=ka;function qa(e){var t=e?qa._parseNumbers(e):{};this.index=t.index||"",this.query=t.query||"",this.facets=t.facets||[],this.disjunctiveFacets=t.disjunctiveFacets||[],this.hierarchicalFacets=t.hierarchicalFacets||[],this.facetsRefinements=t.facetsRefinements||{},this.facetsExcludes=t.facetsExcludes||{},this.disjunctiveFacetsRefinements=t.disjunctiveFacetsRefinements||{},this.numericRefinements=t.numericRefinements||{},this.tagRefinements=t.tagRefinements||[],this.hierarchicalFacetsRefinements=t.hierarchicalFacetsRefinements||{},this.numericFilters=t.numericFilters,this.tagFilters=t.tagFilters,this.optionalTagFilters=t.optionalTagFilters,this.optionalFacetFilters=t.optionalFacetFilters,this.hitsPerPage=t.hitsPerPage,this.maxValuesPerFacet=t.maxValuesPerFacet,this.page=t.page||0,this.queryType=t.queryType,this.typoTolerance=t.typoTolerance,this.minWordSizefor1Typo=t.minWordSizefor1Typo,this.minWordSizefor2Typos=t.minWordSizefor2Typos,this.minProximity=t.minProximity,this.allowTyposOnNumericTokens=t.allowTyposOnNumericTokens,this.ignorePlurals=t.ignorePlurals,this.restrictSearchableAttributes=t.restrictSearchableAttributes,this.advancedSyntax=t.advancedSyntax,this.analytics=t.analytics,this.analyticsTags=t.analyticsTags,this.synonyms=t.synonyms,this.replaceSynonymsInHighlight=t.replaceSynonymsInHighlight,this.optionalWords=t.optionalWords,this.removeWordsIfNoResults=t.removeWordsIfNoResults,this.attributesToRetrieve=t.attributesToRetrieve,this.attributesToHighlight=t.attributesToHighlight,this.highlightPreTag=t.highlightPreTag,this.highlightPostTag=t.highlightPostTag,this.attributesToSnippet=t.attributesToSnippet,this.getRankingInfo=t.getRankingInfo,this.distinct=t.distinct,this.aroundLatLng=t.aroundLatLng,this.aroundLatLngViaIP=t.aroundLatLngViaIP,this.aroundRadius=t.aroundRadius,this.minimumAroundRadius=t.minimumAroundRadius,this.aroundPrecision=t.aroundPrecision,this.insideBoundingBox=t.insideBoundingBox,this.insidePolygon=t.insidePolygon,this.snippetEllipsisText=t.snippetEllipsisText,this.disableExactOnAttributes=t.disableExactOnAttributes,this.enableExactOnSingleWordQuery=t.enableExactOnSingleWordQuery,this.offset=t.offset,this.length=t.length;var r=this;Vi(t,function(e,t){-1===qa.PARAMETERS.indexOf(t)&&(r[t]=e)})}qa.PARAMETERS=qt(new qa),qa._parseNumbers=function(n){if(n instanceof qa)return n;var i={};if(Wi(["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"],function(e){var t=n[e];if(sa(t)){var r=parseFloat(t);i[e]=na(r)?t:r}}),Array.isArray(n.insideBoundingBox)&&(i.insideBoundingBox=n.insideBoundingBox.map(function(e){return e.map(function(e){return parseFloat(e)})})),n.numericRefinements){var a={};Wi(n.numericRefinements,function(e,n){a[n]={},Wi(e,function(e,t){var r=Yi(e,function(e){return Array.isArray(e)?Yi(e,function(e){return sa(e)?parseFloat(e):e}):sa(e)?parseFloat(e):e});a[n][t]=r})}),i.numericRefinements=a}return Ma({},n,i)},qa.make=function(e){var r=new qa(e);return Wi(e.hierarchicalFacets,function(e){if(e.rootPath){var t=r.getHierarchicalRefinement(e.name);0<t.length&&0!==t[0].indexOf(e.rootPath)&&(r=r.clearRefinements(e.name)),0===(t=r.getHierarchicalRefinement(e.name)).length&&(r=r.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}}),r},qa.validate=function(e,t){var r=t||{};return e.tagFilters&&r.tagRefinements&&0<r.tagRefinements.length?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):0<e.tagRefinements.length&&r.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&r.numericRefinements&&!fn(r.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):!fn(e.numericRefinements)&&r.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},qa.prototype={constructor:qa,clearRefinements:function(e){var t=Ua.clearRefinement,r={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:t(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:t(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:t(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:t(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return r.numericRefinements===this.numericRefinements&&r.facetsRefinements===this.facetsRefinements&&r.facetsExcludes===this.facetsExcludes&&r.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&r.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(r)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,r){var n=La(r);if(this.isNumericRefined(e,t,n))return this;var i=Ma({},this.numericRefinements);return i[e]=Ma({},i[e]),i[e][t]?(i[e][t]=i[e][t].slice(),i[e][t].push(n)):i[e][t]=[n],this.setQueryParameters({numericRefinements:i})},getConjunctiveRefinements:function(e){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.facetsExcludes[e]||[]},removeNumericRefinement:function(r,n,e){if(void 0!==e){var i=La(e);return this.isNumericRefined(r,n,i)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r&&e.op===n&&ia(e.val,i)})}):this}return void 0!==n?this.isNumericRefined(r,n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r&&e.op===n})}):this:this.isNumericRefined(r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===r})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(a){if(aa(a))return fn(this.numericRefinements)?this.numericRefinements:{};if(sa(a))return fn(this.numericRefinements[a])?this.numericRefinements:Ei(this.numericRefinements,a);if(pe(a)){var s=!1,e=Xi(this.numericRefinements,function(e,t,n){var i={};return Wi(t,function(e,t){var r=[];Wi(e,function(e){a({val:e,op:t},n,"numeric")||r.push(e)}),fn(r)?s=!0:(r.length!==e.length&&(s=!0),i[t]=r)}),fn(i)||(e[n]=i),e},{});return s?e:this.numericRefinements}},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return Ua.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:Ua.addRefinement(this.facetsRefinements,e,t)})},addExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return Ua.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:Ua.addRefinement(this.facetsExcludes,e,t)})},addDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return Ua.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:Ua.addRefinement(this.disjunctiveFacetsRefinements,e,t)})},addTagRefinement:function(e){if(this.isTagRefined(e))return this;var t={tagRefinements:this.tagRefinements.concat(e)};return this.setQueryParameters(t)},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:Ki(this.facets,function(e){return e!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:Ki(this.disjunctiveFacets,function(e){return e!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:Ki(this.hierarchicalFacets,function(e){return e.name!==t})}):this},removeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return Ua.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:Ua.removeRefinement(this.facetsRefinements,e,t)}):this},removeExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return Ua.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:Ua.removeRefinement(this.facetsExcludes,e,t)}):this},removeDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return Ua.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:Ua.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this},removeTagRefinement:function(t){if(!this.isTagRefined(t))return this;var e={tagRefinements:Ki(this.tagRefinements,function(e){return e!==t})};return this.setQueryParameters(e)},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:Ua.toggleRefinement(this.facetsRefinements,e,t)})},toggleExcludeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:Ua.toggleRefinement(this.facetsExcludes,e,t)})},toggleDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:Ua.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)})},toggleHierarchicalFacetRefinement:function(e,t){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),n={};return void 0!==this.hierarchicalFacetsRefinements[e]&&0<this.hierarchicalFacetsRefinements[e].length&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+r))?-1===t.indexOf(r)?n[e]=[]:n[e]=[t.slice(0,t.lastIndexOf(r))]:n[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:Na({},n,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");var r={};return r[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:Na({},r,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(e){if(!this.isHierarchicalFacetRefined(e))throw new Error(e+" is not refined.");var t={};return t[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:Na({},t,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return-1<ta(this.disjunctiveFacets,e)},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return-1<ta(this.facets,e)},isFacetRefined:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return Ua.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return Ua.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return Ua.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var r=this.getHierarchicalRefinement(e);return t?-1!==ta(r,t):0<r.length},isNumericRefined:function(e,t,r){if(aa(r)&&aa(t))return!!this.numericRefinements[e];var n=this.numericRefinements[e]&&!aa(this.numericRefinements[e][t]);if(aa(r)||!n)return n;var i,a,s=La(r),o=!aa((i=this.numericRefinements[e][t],a=s,cn(i,function(e){return ia(e,a)})));return n&&o},isTagRefined:function(e){return-1!==ta(this.tagRefinements,e)},getRefinedDisjunctiveFacets:function(){var e=Bi(qt(this.numericRefinements),this.disjunctiveFacets);return qt(this.disjunctiveFacetsRefinements).concat(e).concat(this.getRefinedHierarchicalFacets())},getRefinedHierarchicalFacets:function(){return Bi(Yi(this.hierarchicalFacets,"name"),qt(this.hierarchicalFacetsRefinements))},getUnrefinedDisjunctiveFacets:function(){var t=this.getRefinedDisjunctiveFacets();return Ki(this.disjunctiveFacets,function(e){return-1===ta(t,e)})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements"],getQueryParams:function(){var r=this.managedParameters,n={};return Vi(this,function(e,t){-1===ta(r,t)&&void 0!==e&&(n[t]=e)}),n},getQueryParameter:function(e){if(!this.hasOwnProperty(e))throw new Error("Parameter '"+e+"' is not an attribute of SearchParameters (http://algolia.github.io/algoliasearch-helper-js/docs/SearchParameters.html)");return this[e]},setQueryParameter:function(e,t){if(this[e]===t)return this;var r={};return r[e]=t,this.setQueryParameters(r)},setQueryParameters:function(r){if(!r)return this;var e=qa.validate(this,r);if(e)throw e;var n=qa._parseNumbers(r);return this.mutateMe(function(t){var e=qt(r);return Wi(e,function(e){t[e]=n[e]}),t})},filter:function(e){return Ba(this,e)},mutateMe:function(e){var t=new this.constructor(this);return e(t,this),t},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(e){return cn(this.hierarchicalFacets,{name:e})},getHierarchicalFacetBreadcrumb:function(e){if(!this.isHierarchicalFacet(e))throw new Error("Cannot get the breadcrumb of an unknown hierarchical facet: `"+e+"`");var t=this.getHierarchicalRefinement(e)[0];if(!t)return[];var r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),n=t.split(r);return Yi(n,Oa)},toString:function(){return JSON.stringify(this,null,2)}};var Va=qa;var za=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var a=e[t];a&&(i[n++]=a)}return i};var Wa=function(e,t){for(var r,n=-1,i=e.length;++n<i;){var a=t(e[n]);void 0!==a&&(r=void 0===r?a:r+a)}return r};var $a=function(e,t){return e&&e.length?Wa(e,Kr(t,2)):0};var Ka=function(t,e){return Ar(e,function(e){return t[e]})};var Ja=function(e){return null==e?[]:Ka(e,qt(e))},Ya=Math.max;var Ga=function(e,t,r,n){e=Ut(e)?e:Ja(e),r=r&&!n?an(r):0;var i=e.length;return r<0&&(r=Ya(i+r,0)),sa(e)?r<=i&&-1<e.indexOf(t,r):!!i&&-1<Ni(e,t,r)};var Za=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e};var Xa=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e==e,a=Rr(e),s=void 0!==t,o=null===t,c=t==t,u=Rr(t);if(!o&&!u&&!a&&t<e||a&&s&&c&&!o&&!u||n&&s&&c||!r&&c||!i)return 1;if(!n&&!a&&!u&&e<t||u&&r&&i&&!n&&!a||o&&r&&i||!s&&i||!c)return-1}return 0};var es=function(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,s=i.length,o=r.length;++n<s;){var c=Xa(i[n],a[n]);if(c)return o<=n?c:c*("desc"==r[n]?-1:1)}return e.index-t.index};var ts=function(e,n,r){var i=-1;n=Ar(n.length?n:[Vr],At(Kr));var t=Ji(e,function(t,e,r){return{criteria:Ar(n,function(e){return e(t)}),index:++i,value:t}});return Za(t,function(e,t){return es(e,t,r)})};var rs=function(e,t,r,n){return null==e?[]:(ut(t)||(t=null==t?[]:[t]),ut(r=n?void 0:r)||(r=null==r?[]:[r]),ts(e,t,r))},ns=Yt&&new Yt,is=ns?function(e,t){return ns.set(e,t),e}:Vr;var as=function(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=Un(n.prototype),r=n.apply(t,e);return le(r)?r:t}};var ss=function(t,e,r){var n=1&e,i=as(t);return function e(){return(this&&this!==ee&&this instanceof e?i:t).apply(n?r:this,arguments)}},os=Math.max;var cs=function(e,t,r,n){for(var i=-1,a=e.length,s=r.length,o=-1,c=t.length,u=os(a-s,0),f=Array(c+u),l=!n;++o<c;)f[o]=t[o];for(;++i<s;)(l||i<a)&&(f[r[i]]=e[i]);for(;u--;)f[o++]=e[i++];return f},us=Math.max;var fs=function(e,t,r,n){for(var i=-1,a=e.length,s=-1,o=r.length,c=-1,u=t.length,f=us(a-o,0),l=Array(f+u),h=!n;++i<f;)l[i]=e[i];for(var p=i;++c<u;)l[p+c]=t[c];for(;++s<o;)(h||i<a)&&(l[p+r[s]]=e[i++]);return l};var ls=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n};var hs=function(){};function ps(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}var ds=(ps.prototype=Un(hs.prototype)).constructor=ps;var vs=ns?function(e){return ns.get(e)}:function(){},ms={},gs=Object.prototype.hasOwnProperty;var ys=function(e){for(var t=e.name+"",r=ms[t],n=gs.call(ms,t)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==e)return i.name}return t};function bs(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}var Rs=(bs.prototype=Un(hs.prototype)).constructor=bs;var xs=function(e){if(e instanceof ds)return e.clone();var t=new Rs(e.__wrapped__,e.__chain__);return t.__actions__=jn(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},Fs=Object.prototype.hasOwnProperty;function _s(e){if(gt(e)&&!ut(e)&&!(e instanceof ds)){if(e instanceof Rs)return e;if(Fs.call(e,"__wrapped__"))return xs(e)}return new Rs(e)}var js=(_s.prototype=hs.prototype).constructor=_s;var Ps=function(e){var t=ys(e),r=js[t];if("function"!=typeof r||!(t in ds.prototype))return!1;if(e===r)return!0;var n=vs(r);return!!n&&e===n[0]},ws=wi(is),Ss=/\{\n\/\* \[wrapped with (.+)\] \*/,Os=/,? & /;var Es=function(e){var t=e.match(Ss);return t?t[1].split(Os):[]},As=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var Ts=function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(1<r?"& ":"")+t[n],t=t.join(2<r?", ":" "),e.replace(As,"{\n/* [wrapped with "+t+"] */\n")},Ns=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var Cs=function(r,n){return ln(Ns,function(e){var t="_."+e[0];n&e[1]&&!Ci(r,t)&&r.push(t)}),r.sort()};var Is=function(e,t,r){var n=t+"";return Si(e,Ts(n,Cs(Es(n),r)))};var Hs=function(e,t,r,n,i,a,s,o,c,u){var f=8&t;t|=f?32:64,4&(t&=~(f?64:32))||(t&=-4);var l=[e,t,i,f?a:void 0,f?s:void 0,f?void 0:a,f?void 0:s,o,c,u],h=r.apply(void 0,l);return Ps(e)&&ws(h,l),h.placeholder=n,Is(h,e,t)};var Qs=function(e){return e.placeholder},Ds=Math.min;var Ms=function(e,t){for(var r=e.length,n=Ds(t.length,r),i=jn(e);n--;){var a=t[n];e[n]=wt(a,r)?i[a]:void 0}return e},Ls="__lodash_placeholder__";var Bs=function(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var s=e[r];s!==t&&s!==Ls||(e[r]=Ls,a[i++]=r)}return a},ks=1,Us=2,qs=8,Vs=16,zs=128,Ws=512;var $s=function u(f,l,h,p,d,v,m,g,y,b){var R=l&zs,x=l&ks,F=l&Us,_=l&(qs|Vs),j=l&Ws,P=F?void 0:as(f);return function e(){for(var t=arguments.length,r=Array(t),n=t;n--;)r[n]=arguments[n];if(_)var i=Qs(e),a=ls(r,i);if(p&&(r=cs(r,p,d,_)),v&&(r=fs(r,v,m,_)),t-=a,_&&t<b){var s=Bs(r,i);return Hs(f,l,u,e.placeholder,h,r,s,g,y,b-t)}var o=x?h:this,c=F?o[f]:f;return t=r.length,g?r=Ms(r,g):j&&1<t&&r.reverse(),R&&y<t&&(r.length=y),this&&this!==ee&&this instanceof e&&(c=P||as(c)),c.apply(o,r)}};var Ks=function(s,o,c){var u=as(s);return function e(){for(var t=arguments.length,r=Array(t),n=t,i=Qs(e);n--;)r[n]=arguments[n];var a=t<3&&r[0]!==i&&r[t-1]!==i?[]:Bs(r,i);return(t-=a.length)<c?Hs(s,o,$s,e.placeholder,void 0,r,a,void 0,void 0,c-t):Ri(this&&this!==ee&&this instanceof e?u:s,this,r)}};var Js=function(o,e,c,u){var f=1&e,l=as(o);return function e(){for(var t=-1,r=arguments.length,n=-1,i=u.length,a=Array(i+r),s=this&&this!==ee&&this instanceof e?l:o;++n<i;)a[n]=u[n];for(;r--;)a[n++]=arguments[++t];return Ri(s,f?c:this,a)}},Ys="__lodash_placeholder__",Gs=Math.min;var Zs=function(e,t){var r=e[1],n=t[1],i=r|n,a=i<131,s=128==n&&8==r||128==n&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!a&&!s)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var o=t[3];if(o){var c=e[3];e[3]=c?cs(c,o,t[4]):o,e[4]=c?Bs(e[3],Ys):t[4]}return(o=t[5])&&(c=e[5],e[5]=c?fs(c,o,t[6]):o,e[6]=c?Bs(e[5],Ys):t[6]),(o=t[7])&&(e[7]=o),128&n&&(e[8]=null==e[8]?t[8]:Gs(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e},Xs=Math.max;var eo=function(e,t,r,n,i,a,s,o){var c=2&t;if(!c&&"function"!=typeof e)throw new TypeError("Expected a function");var u=n?n.length:0;if(u||(t&=-97,n=i=void 0),s=void 0===s?s:Xs(an(s),0),o=void 0===o?o:an(o),u-=i?i.length:0,64&t){var f=n,l=i;n=i=void 0}var h=c?void 0:vs(e),p=[e,t,r,n,i,f,l,a,s,o];if(h&&Zs(p,h),e=p[0],t=p[1],r=p[2],n=p[3],i=p[4],!(o=p[9]=void 0===p[9]?c?0:e.length:Xs(p[9]-u,0))&&24&t&&(t&=-25),t&&1!=t)d=8==t||16==t?Ks(e,t,o):32!=t&&33!=t||i.length?$s.apply(void 0,p):Js(e,t,r,n);else var d=ss(e,t,r);return Is((h?is:ws)(d,p),e,t)},to=Di(function(e,t){var r=Bs(t,Qs(to));return eo(e,32,void 0,t,r)});to.placeholder={};var ro=to,no=Di(function(e,t){var r=Bs(t,Qs(no));return eo(e,64,void 0,t,r)});no.placeholder={};var io=no;var ao=function(e,t,r){return e==e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=t<=e?e:t)),e};var so=function(e,t,r){return e=Hr(e),r=null==r?0:ao(an(r),0,e.length),t=Ir(t),e.slice(r,r+t.length)==t},oo=function(e,i){return Xi(e,function(e,t){var r=t.split(":");if(i&&1===r.length){var n=cn(i,function(e){return so(e,t[0])});n&&(r=n.split(":"))}return e[0].push(r[0]),e[1].push(r[1]),e},[[],[]])};var co=function(e,t,r,n){if(!le(e))return e;for(var i=-1,a=(t=Qr(t,e)).length,s=a-1,o=e;null!=o&&++i<a;){var c=Dr(t[i]),u=r;if(i!=s){var f=o[c];void 0===(u=n?n(f,c,o):void 0)&&(u=le(f)?f:wt(t[i+1])?[]:{})}vn(o,c,u),o=o[c]}return e};var uo=function(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var s=t[n],o=Mr(e,s);r(o,s)&&co(a,Qr(s,e),o)}return a};var fo=function(e,r){if(null==e)return{};var t=Ar(En(e),function(e){return[e]});return r=Kr(r),uo(e,t,function(e,t){return r(e,t[0])})},lo=function(f){return function(e,t){var p,d,v,m,g,r=f.hierarchicalFacets[t],n=f.hierarchicalFacetsRefinements[r.name]&&f.hierarchicalFacetsRefinements[r.name][0]||"",i=f._getHierarchicalFacetSeparator(r),a=f._getHierarchicalRootPath(r),s=f._getHierarchicalShowParentLevel(r),o=oo(f._getHierarchicalFacetSortBy(r)),c=(p=o,d=i,v=a,m=s,g=n,function(e,t,r){var n,i,a,s,o,c,u,f=e;if(0<r){var l=0;for(f=e;l<r;)f=f&&cn(f.data,{isRefined:!0}),l++}if(f){var h=(a=f.path||v,s=g,o=d,c=v,u=m,function(e,t){return(!c||0===t.indexOf(c)&&c!==t)&&(!c&&-1===t.indexOf(o)||c&&t.split(o).length-c.split(o).length==1||-1===t.indexOf(o)&&-1===s.indexOf(o)||0===s.indexOf(t)||0===t.indexOf(a+o)&&(u||0===t.indexOf(s)))});f.data=rs(Yi(fo(t.data,h),(n=d,i=g,function(e,t){return{name:Oa(ai(t.split(n))),path:t,count:e,isRefined:i===t||0===i.indexOf(t+n),data:null}})),p[0],p[1])}return e}),u=e;return a&&(u=e.slice(a.split(i).length)),Xi(u,c,{name:f.hierarchicalFacets[t].name,count:null,isRefined:!0,path:null,data:null})}};function ho(e){var r={};return Wi(e,function(e,t){r[e]=t}),r}function po(e,t,r){t&&t[r]&&(e.stats=t[r])}function vo(f,r){var l=r[0];this._rawResults=r,this.query=l.query,this.parsedQuery=l.parsedQuery,this.hits=l.hits,this.index=l.index,this.hitsPerPage=l.hitsPerPage,this.nbHits=l.nbHits,this.nbPages=l.nbPages,this.page=l.page,this.processingTimeMS=$a(r,"processingTimeMS"),this.aroundLatLng=l.aroundLatLng,this.automaticRadius=l.automaticRadius,this.serverUsed=l.serverUsed,this.timeoutCounts=l.timeoutCounts,this.timeoutHits=l.timeoutHits,this.exhaustiveFacetsCount=l.exhaustiveFacetsCount,this.exhaustiveNbHits=l.exhaustiveNbHits,this.userData=l.userData,this.queryID=l.queryID,this.disjunctiveFacets=[],this.hierarchicalFacets=Yi(f.hierarchicalFacets,function(){return[]}),this.facets=[];var e=f.getRefinedDisjunctiveFacets(),h=ho(f.facets),p=ho(f.disjunctiveFacets),n=1,d=this;Wi(l.facets,function(e,t){var r,n,i=(r=f.hierarchicalFacets,n=t,cn(r,function(e){return Ga(e.attributes,n)}));if(i){var a=i.attributes.indexOf(t),s=on(f.hierarchicalFacets,{name:i.name});d.hierarchicalFacets[s][a]={attribute:t,data:e,exhaustive:l.exhaustiveFacetsCount}}else{var o,c=-1!==ta(f.disjunctiveFacets,t),u=-1!==ta(f.facets,t);c&&(o=p[t],d.disjunctiveFacets[o]={name:t,data:e,exhaustive:l.exhaustiveFacetsCount},po(d.disjunctiveFacets[o],l.facets_stats,t)),u&&(o=h[t],d.facets[o]={name:t,data:e,exhaustive:l.exhaustiveFacetsCount},po(d.facets[o],l.facets_stats,t))}}),this.hierarchicalFacets=za(this.hierarchicalFacets),Wi(e,function(e){var a=r[n],s=f.getHierarchicalFacetByName(e);Wi(a.facets,function(e,t){var r;if(s){r=on(f.hierarchicalFacets,{name:s.name});var n=on(d.hierarchicalFacets[r],{attribute:t});if(-1===n)return;d.hierarchicalFacets[r][n].data=Ma({},d.hierarchicalFacets[r][n].data,e)}else{r=p[t];var i=l.facets&&l.facets[t]||{};d.disjunctiveFacets[r]={name:t,data:Na({},e,i),exhaustive:a.exhaustiveFacetsCount},po(d.disjunctiveFacets[r],a.facets_stats,t),f.disjunctiveFacetsRefinements[t]&&Wi(f.disjunctiveFacetsRefinements[t],function(e){!d.disjunctiveFacets[r].data[e]&&-1<ta(f.disjunctiveFacetsRefinements[t],e)&&(d.disjunctiveFacets[r].data[e]=0)})}}),n++}),Wi(f.getRefinedHierarchicalFacets(),function(e){var s=f.getHierarchicalFacetByName(e),o=f._getHierarchicalFacetSeparator(s),c=f.getHierarchicalRefinement(e);if(!(0===c.length||c[0].split(o).length<2)){var t=r[n];Wi(t.facets,function(e,t){var r=on(f.hierarchicalFacets,{name:s.name}),n=on(d.hierarchicalFacets[r],{attribute:t});if(-1!==n){var i={};if(0<c.length){var a=c[0].split(o)[0];i[a]=d.hierarchicalFacets[r][n].data[a]}d.hierarchicalFacets[r][n].data=Na(i,e,d.hierarchicalFacets[r][n].data)}}),n++}}),Wi(f.facetsExcludes,function(e,t){var r=h[t];d.facets[r]={name:t,data:l.facets[t],exhaustive:l.exhaustiveFacetsCount},Wi(e,function(e){d.facets[r]=d.facets[r]||{name:t},d.facets[r].data=d.facets[r].data||{},d.facets[r].data[e]=0})}),this.hierarchicalFacets=Yi(this.hierarchicalFacets,lo(f)),this.facets=za(this.facets),this.disjunctiveFacets=za(this.disjunctiveFacets),this._state=f}function mo(e,t){if(!t.data||0===t.data.length)return t;var r=e(Yi(t.data,ro(mo,e)));return Ma({},t,{data:r})}function go(e,t){return t.sort(e)}function yo(e,t){var r=cn(e,{name:t});return r&&r.stats}function bo(e,t,r,n,i){var a=cn(i,{name:r});return{type:t,attributeName:r,name:n,count:Lr(a,"data["+n+"]")||0,exhaustive:Lr(a,"exhaustive")||!1}}vo.prototype.getFacetByName=function(e){var t={name:e};return cn(this.facets,t)||cn(this.disjunctiveFacets,t)||cn(this.hierarchicalFacets,t)},vo.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],vo.prototype.getFacetValues=function(e,t){var r=function(r,n){var e={name:n};if(r._state.isConjunctiveFacet(n)){var t=cn(r.facets,e);return t?Yi(t.data,function(e,t){return{name:t,count:e,isRefined:r._state.isFacetRefined(n,t),isExcluded:r._state.isExcludeRefined(n,t)}}):[]}if(r._state.isDisjunctiveFacet(n)){var i=cn(r.disjunctiveFacets,e);return i?Yi(i.data,function(e,t){return{name:t,count:e,isRefined:r._state.isDisjunctiveFacetRefined(n,t)}}):[]}if(r._state.isHierarchicalFacet(n))return cn(r.hierarchicalFacets,e)}(this,e);if(!r)throw new Error(e+" is not a retrieved facet.");var n=Na({},t,{sortBy:vo.DEFAULT_SORT});if(Array.isArray(n.sortBy)){var i=oo(n.sortBy,vo.DEFAULT_SORT);return Array.isArray(r)?rs(r,i[0],i[1]):mo(io(rs,i[0],i[1]),r)}if(pe(n.sortBy))return Array.isArray(r)?r.sort(n.sortBy):mo(ro(go,n.sortBy),r);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},vo.prototype.getFacetStats=function(e){if(this._state.isConjunctiveFacet(e))return yo(this.facets,e);if(this._state.isDisjunctiveFacet(e))return yo(this.disjunctiveFacets,e);throw new Error(e+" is not present in `facets` or `disjunctiveFacets`")},vo.prototype.getRefinements=function(){var r=this._state,n=this,i=[];return Wi(r.facetsRefinements,function(e,t){Wi(e,function(e){i.push(bo(r,"facet",t,e,n.facets))})}),Wi(r.facetsExcludes,function(e,t){Wi(e,function(e){i.push(bo(r,"exclude",t,e,n.facets))})}),Wi(r.disjunctiveFacetsRefinements,function(e,t){Wi(e,function(e){i.push(bo(r,"disjunctive",t,e,n.disjunctiveFacets))})}),Wi(r.hierarchicalFacetsRefinements,function(e,t){Wi(e,function(e){i.push(function(e,t,r,n){for(var i=cn(n,{name:t}),a=e.getHierarchicalFacetByName(t),s=r.split(a.separator),o=s[s.length-1],c=0;void 0!==i&&c<s.length;++c)i=cn(i.data,{name:s[c]});var u=Lr(i,"count"),f=Lr(i,"exhaustive");return{type:"hierarchical",attributeName:t,name:o,count:u||0,exhaustive:f||!1}}(r,t,e,n.hierarchicalFacets))})}),Wi(r.numericRefinements,function(e,r){Wi(e,function(e,t){Wi(e,function(e){i.push({type:"numeric",attributeName:r,name:e,numericValue:e,operator:t})})})}),Wi(r.tagRefinements,function(e){i.push({type:"tag",attributeName:"_tags",name:e})}),i};var Ro=vo,xo=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8},Fo=S(function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),_o=S(function(e,p){var o=/%[sdj%]/g;p.format=function(e){if(!x(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(c(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(o,function(e){if("%%"===e)return"%";if(i<=r)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<i;s=n[++r])b(s)||!u(s)?a+=" "+s:a+=" "+c(s);return a},p.deprecate=function(e,t){if(F(E.process))return function(){return p.deprecate(e,t).apply(this,arguments)};if(!0===O.noDeprecation)return e;var r=!1;return function(){if(!r){if(O.throwDeprecation)throw new Error(t);O.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}};var n,i={};function c(e,t){var r={seen:[],stylize:s};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),y(t)?r.showHidden=t:t&&p._extend(r,t),F(r.showHidden)&&(r.showHidden=!1),F(r.depth)&&(r.depth=2),F(r.colors)&&(r.colors=!1),F(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),d(r,e,r.depth)}function a(e,t){var r=c.styles[t];return r?"["+c.colors[r][0]+"m"+e+"["+c.colors[r][1]+"m":e}function s(e,t){return e}function d(t,r,n){if(t.customInspect&&r&&w(r.inspect)&&r.inspect!==p.inspect&&(!r.constructor||r.constructor.prototype!==r)){var e=r.inspect(n,t);return x(e)||(e=d(t,e,n)),e}var i=function(e,t){if(F(t))return e.stylize("undefined","undefined");if(x(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(R(t))return e.stylize(""+t,"number");if(y(t))return e.stylize(""+t,"boolean");if(b(t))return e.stylize("null","null")}(t,r);if(i)return i;var a,s=Object.keys(r),o=(a={},s.forEach(function(e,t){a[e]=!0}),a);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),P(r)&&(0<=s.indexOf("message")||0<=s.indexOf("description")))return v(r);if(0===s.length){if(w(r)){var c=r.name?": "+r.name:"";return t.stylize("[Function"+c+"]","special")}if(_(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(j(r))return t.stylize(Date.prototype.toString.call(r),"date");if(P(r))return v(r)}var u,f="",l=!1,h=["{","}"];(g(r)&&(l=!0,h=["[","]"]),w(r))&&(f=" [Function"+(r.name?": "+r.name:"")+"]");return _(r)&&(f=" "+RegExp.prototype.toString.call(r)),j(r)&&(f=" "+Date.prototype.toUTCString.call(r)),P(r)&&(f=" "+v(r)),0!==s.length||l&&0!=r.length?n<0?_(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),u=l?function(t,r,n,i,e){for(var a=[],s=0,o=r.length;s<o;++s)S(r,String(s))?a.push(m(t,r,n,i,String(s),!0)):a.push("");return e.forEach(function(e){e.match(/^\d+$/)||a.push(m(t,r,n,i,e,!0))}),a}(t,r,n,o,s):s.map(function(e){return m(t,r,n,o,e,l)}),t.seen.pop(),function(e,t,r){if(60<e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,f,h)):h[0]+f+h[1]}function v(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,r,n,i,a){var s,o,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?o=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(o=e.stylize("[Setter]","special")),S(n,i)||(s="["+i+"]"),o||(e.seen.indexOf(c.value)<0?-1<(o=b(r)?d(e,c.value,null):d(e,c.value,r-1)).indexOf("\n")&&(o=a?o.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+o.split("\n").map(function(e){return"   "+e}).join("\n")):o=e.stylize("[Circular]","special")),F(s)){if(a&&i.match(/^\d+$/))return o;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+o}function g(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function b(e){return null===e}function R(e){return"number"==typeof e}function x(e){return"string"==typeof e}function F(e){return void 0===e}function _(e){return u(e)&&"[object RegExp]"===t(e)}function u(e){return"object"==typeof e&&null!==e}function j(e){return u(e)&&"[object Date]"===t(e)}function P(e){return u(e)&&("[object Error]"===t(e)||e instanceof Error)}function w(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function r(e){return e<10?"0"+e.toString(10):e.toString(10)}p.debuglog=function(t){if(F(n)&&(n=O.env.NODE_DEBUG||""),t=t.toUpperCase(),!i[t])if(new RegExp("\\b"+t+"\\b","i").test(n)){var r=O.pid;i[t]=function(){var e=p.format.apply(p,arguments);console.error("%s %d: %s",t,r,e)}}else i[t]=function(){};return i[t]},(p.inspect=c).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},p.isArray=g,p.isBoolean=y,p.isNull=b,p.isNullOrUndefined=function(e){return null==e},p.isNumber=R,p.isString=x,p.isSymbol=function(e){return"symbol"==typeof e},p.isUndefined=F,p.isRegExp=_,p.isObject=u,p.isDate=j,p.isError=P,p.isFunction=w,p.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},p.isBuffer=xo;var f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}p.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[r(e.getHours()),r(e.getMinutes()),r(e.getSeconds())].join(":"),[e.getDate(),f[e.getMonth()],t].join(" ")),p.format.apply(p,arguments))},p.inherits=Fo,p._extend=function(e,t){if(!t||!u(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}});_o.format,_o.deprecate,_o.debuglog,_o.inspect,_o.isArray,_o.isBoolean,_o.isNull,_o.isNullOrUndefined,_o.isNumber,_o.isString,_o.isSymbol,_o.isUndefined,_o.isRegExp,_o.isObject,_o.isDate,_o.isError,_o.isFunction,_o.isPrimitive,_o.isBuffer,_o.log,_o.inherits,_o._extend;function jo(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var Po=jo;function wo(e){return"function"==typeof e}function So(e){return"object"==typeof e&&null!==e}function Oo(e){return void 0===e}function Eo(e,t){this.main=e,this.fn=t,this.lastResults=null}(jo.EventEmitter=jo).prototype._events=void 0,jo.prototype._maxListeners=void 0,jo.defaultMaxListeners=10,jo.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},jo.prototype.emit=function(e){var t,r,n,i,a,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||So(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var o=new Error('Uncaught, unspecified "error" event. ('+t+")");throw o.context=t,o}if(Oo(r=this._events[e]))return!1;if(wo(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(So(r))for(i=Array.prototype.slice.call(arguments,1),n=(s=r.slice()).length,a=0;a<n;a++)s[a].apply(this,i);return!0},jo.prototype.on=jo.prototype.addListener=function(e,t){var r;if(!wo(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,wo(t.listener)?t.listener:t),this._events[e]?So(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,So(this._events[e])&&!this._events[e].warned&&(r=Oo(this._maxListeners)?jo.defaultMaxListeners:this._maxListeners)&&0<r&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},jo.prototype.once=function(e,t){if(!wo(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},jo.prototype.removeListener=function(e,t){var r,n,i,a;if(!wo(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(r=this._events[e]).length,n=-1,r===t||wo(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(So(r)){for(a=i;0<a--;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},jo.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(wo(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},jo.prototype.listeners=function(e){return this._events&&this._events[e]?wo(this._events[e])?[this._events[e]]:this._events[e].slice():[]},jo.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(wo(t))return 1;if(t)return t.length}return 0},jo.listenerCount=function(e,t){return e.listenerCount(t)},_o.inherits(Eo,Po.EventEmitter),Eo.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},Eo.prototype.getModifiedState=function(e){return this.fn(e)};var Ao=Eo,To={_getQueries:function(i,a){var s=[];return s.push({indexName:i,params:To._getHitsSearchParams(a)}),Wi(a.getRefinedDisjunctiveFacets(),function(e){s.push({indexName:i,params:To._getDisjunctiveFacetSearchParams(a,e)})}),Wi(a.getRefinedHierarchicalFacets(),function(e){var t=a.getHierarchicalFacetByName(e),r=a.getHierarchicalRefinement(e),n=a._getHierarchicalFacetSeparator(t);0<r.length&&1<r[0].split(n).length&&s.push({indexName:i,params:To._getDisjunctiveFacetSearchParams(a,e,!0)})}),s},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(To._getHitsHierarchicalFacetsAttributes(e)),r=To._getFacetFilters(e),n=To._getNumericFilters(e),i={facets:t,tagFilters:To._getTagFilters(e)};return 0<r.length&&(i.facetFilters=r),0<n.length&&(i.numericFilters=n),Ma(e.getQueryParams(),i)},_getDisjunctiveFacetSearchParams:function(e,t,r){var n=To._getFacetFilters(e,t,r),i=To._getNumericFilters(e,t),a={hitsPerPage:1,page:0,attributesToRetrieve:[],attributesToHighlight:[],attributesToSnippet:[],tagFilters:To._getTagFilters(e),analytics:!1,clickAnalytics:!1},s=e.getHierarchicalFacetByName(t);return a.facets=s?To._getDisjunctiveHierarchicalFacetAttribute(e,s,r):t,0<i.length&&(a.numericFilters=i),0<n.length&&(a.facetFilters=n),Ma(e.getQueryParams(),a)},_getNumericFilters:function(e,t){if(e.numericFilters)return e.numericFilters;var i=[];return Wi(e.numericRefinements,function(e,n){Wi(e,function(e,r){t!==n&&Wi(e,function(e){if(Array.isArray(e)){var t=Yi(e,function(e){return n+r+e});i.push(t)}else i.push(n+r+e)})})}),i},_getTagFilters:function(e){return e.tagFilters?e.tagFilters:e.tagRefinements.join(",")},_getFacetFilters:function(c,u,f){var l=[];return Wi(c.facetsRefinements,function(e,t){Wi(e,function(e){l.push(t+":"+e)})}),Wi(c.facetsExcludes,function(e,t){Wi(e,function(e){l.push(t+":-"+e)})}),Wi(c.disjunctiveFacetsRefinements,function(e,t){if(t!==u&&e&&0!==e.length){var r=[];Wi(e,function(e){r.push(t+":"+e)}),l.push(r)}}),Wi(c.hierarchicalFacetsRefinements,function(e,t){var r=e[0];if(void 0!==r){var n,i,a=c.getHierarchicalFacetByName(t),s=c._getHierarchicalFacetSeparator(a),o=c._getHierarchicalRootPath(a);if(u===t){if(-1===r.indexOf(s)||!o&&!0===f||o&&o.split(s).length===r.split(s).length)return;o?(i=o.split(s).length-1,r=o):(i=r.split(s).length-2,r=r.slice(0,r.lastIndexOf(s))),n=a.attributes[i]}else i=r.split(s).length-1,n=a.attributes[i];n&&l.push([n+":"+r])}}),l},_getHitsHierarchicalFacetsAttributes:function(s){return Xi(s.hierarchicalFacets,function(e,t){var r=s.getHierarchicalRefinement(t.name)[0];if(!r)return e.push(t.attributes[0]),e;var n=s._getHierarchicalFacetSeparator(t),i=r.split(n).length,a=t.attributes.slice(0,i+1);return e.concat(a)},[])},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,r){var n=e._getHierarchicalFacetSeparator(t);if(!0===r){var i=e._getHierarchicalRootPath(t),a=0;return i&&(a=i.split(n).length),[t.attributes[a]]}var s=(e.getHierarchicalRefinement(t.name)[0]||"").split(n).length-1;return t.attributes.slice(0,s+1)},getSearchForFacetQuery:function(e,t,r,n){var i=n.isDisjunctiveFacet(e)?n.clearRefinements(e):n,a={facetQuery:t,facetName:e};return"number"==typeof r&&(a.maxFacetHits=r),Ma(To._getHitsSearchParams(i),a)}},No=To;var Co=function(e,n,i,a){return Ui(e,function(e,t,r){n(a,i(e),t,r)}),a};var Io=function(r,n){return function(e,t){return Co(e,r,n(t),{})}},Ho=Object.prototype.toString,Qo=Io(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Ho.call(t)),e[t]=r},_i(Vr)),Do={advancedSyntax:"aS",allowTyposOnNumericTokens:"aTONT",analyticsTags:"aT",analytics:"a",aroundLatLngViaIP:"aLLVIP",aroundLatLng:"aLL",aroundPrecision:"aP",aroundRadius:"aR",attributesToHighlight:"aTH",attributesToRetrieve:"aTR",attributesToSnippet:"aTS",disjunctiveFacetsRefinements:"dFR",disjunctiveFacets:"dF",distinct:"d",facetsExcludes:"fE",facetsRefinements:"fR",facets:"f",getRankingInfo:"gRI",hierarchicalFacetsRefinements:"hFR",hierarchicalFacets:"hF",highlightPostTag:"hPoT",highlightPreTag:"hPrT",hitsPerPage:"hPP",ignorePlurals:"iP",index:"idx",insideBoundingBox:"iBB",insidePolygon:"iPg",length:"l",maxValuesPerFacet:"mVPF",minimumAroundRadius:"mAR",minProximity:"mP",minWordSizefor1Typo:"mWS1T",minWordSizefor2Typos:"mWS2T",numericFilters:"nF",numericRefinements:"nR",offset:"o",optionalWords:"oW",page:"p",queryType:"qT",query:"q",removeWordsIfNoResults:"rWINR",replaceSynonymsInHighlight:"rSIH",restrictSearchableAttributes:"rSA",synonyms:"s",tagFilters:"tF",tagRefinements:"tR",typoTolerance:"tT",optionalTagFilters:"oTF",optionalFacetFilters:"oFF",snippetEllipsisText:"sET",disableExactOnAttributes:"dEOA",enableExactOnSingleWordQuery:"eEOSWQ"},Mo=Qo(Do),Lo={ENCODED_PARAMETERS:qt(Mo),decode:function(e){return Mo[e]},encode:function(e){return Do[e]}},Bo=S(function(e,a){var s=Object.prototype.hasOwnProperty,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();a.arrayToObject=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},a.merge=function(r,n,i){if(!n)return r;if("object"!=typeof n){if(Array.isArray(r))r.push(n);else{if("object"!=typeof r)return[r,n];(i.plainObjects||i.allowPrototypes||!s.call(Object.prototype,n))&&(r[n]=!0)}return r}if("object"!=typeof r)return[r].concat(n);var e=r;return Array.isArray(r)&&!Array.isArray(n)&&(e=a.arrayToObject(r,i)),Array.isArray(r)&&Array.isArray(n)?(n.forEach(function(e,t){s.call(r,t)?r[t]&&"object"==typeof r[t]?r[t]=a.merge(r[t],e,i):r.push(e):r[t]=e}),r):Object.keys(n).reduce(function(e,t){var r=n[t];return s.call(e,t)?e[t]=a.merge(e[t],r,i):e[t]=r,e},e)},a.assign=function(e,r){return Object.keys(r).reduce(function(e,t){return e[t]=r[t],e},e)},a.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},a.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",n=0;n<t.length;++n){var i=t.charCodeAt(n);45===i||46===i||95===i||126===i||48<=i&&i<=57||65<=i&&i<=90||97<=i&&i<=122?r+=t.charAt(n):i<128?r+=o[i]:i<2048?r+=o[192|i>>6]+o[128|63&i]:i<55296||57344<=i?r+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(n+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),r+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return r},a.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],s=Object.keys(a),o=0;o<s.length;++o){var c=s[o],u=a[c];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:c}),r.push(u))}return function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var n=[],i=0;i<t.length;++i)void 0!==t[i]&&n.push(t[i]);r.obj[r.prop]=n}}return t}(t)},a.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},a.isBuffer=function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}}),ko=(Bo.arrayToObject,Bo.merge,Bo.assign,Bo.decode,Bo.encode,Bo.compact,Bo.isRegExp,Bo.isBuffer,String.prototype.replace),Uo=/%20/g,qo={default:"RFC3986",formatters:{RFC1738:function(e){return ko.call(e,Uo,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},Vo={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},zo=Date.prototype.toISOString,Wo={delimiter:"&",encode:!0,encoder:Bo.encode,encodeValuesOnly:!1,serializeDate:function(e){return zo.call(e)},skipNulls:!1,strictNullHandling:!1},$o=function e(t,r,n,i,a,s,o,c,u,f,l,h){var p=t;if("function"==typeof o)p=o(r,p);else if(p instanceof Date)p=f(p);else if(null===p){if(i)return s&&!h?s(r,Wo.encoder):r;p=""}if("string"==typeof p||"number"==typeof p||"boolean"==typeof p||Bo.isBuffer(p))return s?[l(h?r:s(r,Wo.encoder))+"="+l(s(p,Wo.encoder))]:[l(r)+"="+l(String(p))];var d,v=[];if(void 0===p)return v;if(Array.isArray(o))d=o;else{var m=Object.keys(p);d=c?m.sort(c):m}for(var g=0;g<d.length;++g){var y=d[g];a&&null===p[y]||(v=Array.isArray(p)?v.concat(e(p[y],n(r,y),n,i,a,s,o,c,u,f,l,h)):v.concat(e(p[y],r+(u?"."+y:"["+y+"]"),n,i,a,s,o,c,u,f,l,h)))}return v},Ko=Object.prototype.hasOwnProperty,Jo={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:Bo.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},Yo=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(n),s=a?n.slice(0,a.index):n,o=[];if(s){if(!r.plainObjects&&Ko.call(Object.prototype,s)&&!r.allowPrototypes)return;o.push(s)}for(var c=0;null!==(a=i.exec(n))&&c<r.depth;){if(c+=1,!r.plainObjects&&Ko.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;o.push(a[1])}return a&&o.push("["+n.slice(a.index)+"]"),function(e,t,r){for(var n=t,i=e.length-1;0<=i;--i){var a,s=e[i];if("[]"===s)a=(a=[]).concat(n);else{a=r.plainObjects?Object.create(null):{};var o="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(o,10);!isNaN(c)&&s!==o&&String(c)===o&&0<=c&&r.parseArrays&&c<=r.arrayLimit?(a=[])[c]=n:a[o]=n}n=a}return n}(o,t,r)}},Go=function(e,t){var r=t?Bo.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||Bo.isRegExp(r.delimiter)?r.delimiter:Jo.delimiter,r.depth="number"==typeof r.depth?r.depth:Jo.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:Jo.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:Jo.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:Jo.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:Jo.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:Jo.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:Jo.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:Jo.strictNullHandling,""===e||null==e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?function(e,t){for(var r={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,a=n.split(t.delimiter,i),s=0;s<a.length;++s){var o,c,u=a[s],f=u.indexOf("]="),l=-1===f?u.indexOf("="):f+1;-1===l?(o=t.decoder(u,Jo.decoder),c=t.strictNullHandling?null:""):(o=t.decoder(u.slice(0,l),Jo.decoder),c=t.decoder(u.slice(l+1),Jo.decoder)),Ko.call(r,o)?r[o]=[].concat(r[o]).concat(c):r[o]=c}return r}(e,r):e,i=r.plainObjects?Object.create(null):{},a=Object.keys(n),s=0;s<a.length;++s){var o=a[s],c=Yo(o,n[o],r);i=Bo.merge(i,c,r)}return Bo.compact(i)},Zo=function(e,t){var r=e,n=t?Bo.assign({},t):{};if(null!==n.encoder&&void 0!==n.encoder&&"function"!=typeof n.encoder)throw new TypeError("Encoder has to be a function.");var i=void 0===n.delimiter?Wo.delimiter:n.delimiter,a="boolean"==typeof n.strictNullHandling?n.strictNullHandling:Wo.strictNullHandling,s="boolean"==typeof n.skipNulls?n.skipNulls:Wo.skipNulls,o="boolean"==typeof n.encode?n.encode:Wo.encode,c="function"==typeof n.encoder?n.encoder:Wo.encoder,u="function"==typeof n.sort?n.sort:null,f=void 0!==n.allowDots&&n.allowDots,l="function"==typeof n.serializeDate?n.serializeDate:Wo.serializeDate,h="boolean"==typeof n.encodeValuesOnly?n.encodeValuesOnly:Wo.encodeValuesOnly;if(void 0===n.format)n.format=qo.default;else if(!Object.prototype.hasOwnProperty.call(qo.formatters,n.format))throw new TypeError("Unknown format option provided.");var p,d,v=qo.formatters[n.format];"function"==typeof n.filter?r=(d=n.filter)("",r):Array.isArray(n.filter)&&(p=d=n.filter);var m,g=[];if("object"!=typeof r||null===r)return"";m=n.arrayFormat in Vo?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":"indices";var y=Vo[m];p||(p=Object.keys(r)),u&&p.sort(u);for(var b=0;b<p.length;++b){var R=p[b];s&&null===r[R]||(g=g.concat($o(r[R],R,y,a,s,o?c:null,d,u,f,l,v,h)))}var x=g.join(i),F=!0===n.addQueryPrefix?"?":"";return 0<x.length?F+x:""},Xo=Di(function(e,t,r){var n=1;if(r.length){var i=Bs(r,Qs(Xo));n|=32}return eo(e,n,t,r,i)});Xo.placeholder={};var ec=Xo;var tc=function(r,e){return uo(r,e,function(e,t){return Ur(r,t)})},rc=Oi(function(e,t){return null==e?{}:tc(e,t)});var nc=function(e,n){var i={};return n=Kr(n,3),Ui(e,function(e,t,r){pn(i,n(e,t,r),e)}),i};var ic=function(e,n){var i={};return n=Kr(n,3),Ui(e,function(e,t,r){pn(i,t,n(e,t,r))}),i},ac=Bo.encode;function sc(e){return di(e)?ic(e,sc):Array.isArray(e)?Yi(e,sc):sa(e)?ac(e):e}var oc=["dFR","fR","nR","hFR","tR"],cc=Lo.ENCODED_PARAMETERS;function uc(e,t,r,n){if(null!==e&&(r=r.replace(e,""),n=n.replace(e,"")),r=t[r]||r,n=t[n]||n,-1!==cc.indexOf(r)||-1!==cc.indexOf(n)){if("q"===r)return-1;if("q"===n)return 1;var i=-1!==oc.indexOf(r),a=-1!==oc.indexOf(n);if(i&&!a)return 1;if(a&&!i)return-1}return r.localeCompare(n)}var fc={getStateFromQueryString:function(e,t){var n=t&&t.prefix||"",r=t&&t.mapping||{},i=Qo(r),a=Go(e),s=new RegExp("^"+n),o=nc(a,function(e,t){var r=n&&s.test(t)?t.replace(s,""):t;return Lo.decode(i[r]||r)||r}),c=Va._parseNumbers(o);return rc(c,Va.PARAMETERS)},getUnrecognizedParametersInQueryString:function(e,t){var r=t&&t.prefix,n=t&&t.mapping||{},i=Qo(n),a={},s=Go(e);if(r){var o=new RegExp("^"+r);Wi(s,function(e,t){o.test(t)||(a[t]=e)})}else Wi(s,function(e,t){Lo.decode(i[t]||t)||(a[t]=e)});return a},getQueryStringFromState:function(e,t){var r=t&&t.moreAttributes,n=t&&t.prefix||"",i=t&&t.mapping||{},a=t&&t.safe||!1,s=Qo(i),o=a?e:sc(e),c=nc(o,function(e,t){var r=Lo.encode(t);return n+(i[r]||r)}),u=""===n?null:new RegExp("^"+n),f=ec(uc,null,u,s);if(!fn(r)){var l=Zo(c,{encode:a,sort:f}),h=Zo(r,{encode:a});return l?l+"&"+h:h}return Zo(c,{encode:a,sort:f})}},lc="2.26.0";function hc(e,t,r){e.addAlgoliaAgent&&!vc(e)&&e.addAlgoliaAgent("JS Helper "+lc),this.setClient(e);var n=r||{};n.index=t,this.state=Va.make(n),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}function pc(e){if(e<0)throw new Error("Page requested below 0.");return this._change(this.state.setPage(e)),this}function dc(){return this.state.page}function vc(e){var t=e._ua;return!!t&&-1!==t.indexOf("JS Helper")}_o.inherits(hc,Po.EventEmitter),hc.prototype.search=function(){return this._search(),this},hc.prototype.getQuery=function(){var e=this.state;return No._getHitsSearchParams(e)},hc.prototype.searchOnce=function(e,t){var r=e?this.state.setQueryParameters(e):this.state,n=No._getQueries(r.index,r),i=this;if(this._currentNbQueries++,this.emit("searchOnce",r),!t)return this.client.search(n).then(function(e){return i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),{content:new Ro(r,e.results),state:r,_originalResponse:e}},function(e){throw i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),e});this.client.search(n).then(function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(null,new Ro(r,e.results),r)}).catch(function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(e,null,r)})},hc.prototype.searchForFacetValues=function(t,e,r,n){var i=this.state.setQueryParameters(n||{}),a=i.isDisjunctiveFacet(t),s=No.getSearchForFacetQuery(t,e,r,i);this._currentNbQueries++;var o=this;return this.emit("searchForFacetValues",i,t,e),("function"==typeof this.client.searchForFacetValues?this.client.searchForFacetValues([{indexName:i.index,params:s}]):this.client.initIndex(i.index).searchForFacetValues(s)).then(function(e){return o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),(e=Array.isArray(e)?e[0]:e).facetHits=Wi(e.facetHits,function(e){e.isRefined=a?i.isDisjunctiveFacetRefined(t,e.value):i.isFacetRefined(t,e.value)}),e},function(e){throw o._currentNbQueries--,0===o._currentNbQueries&&o.emit("searchQueueEmpty"),e})},hc.prototype.setQuery=function(e){return this._change(this.state.setPage(0).setQuery(e)),this},hc.prototype.clearRefinements=function(e){return this._change(this.state.setPage(0).clearRefinements(e)),this},hc.prototype.clearTags=function(){return this._change(this.state.setPage(0).clearTags()),this},hc.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change(this.state.setPage(0).addDisjunctiveFacetRefinement(e,t)),this},hc.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},hc.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change(this.state.setPage(0).addHierarchicalFacetRefinement(e,t)),this},hc.prototype.addNumericRefinement=function(e,t,r){return this._change(this.state.setPage(0).addNumericRefinement(e,t,r)),this},hc.prototype.addFacetRefinement=function(e,t){return this._change(this.state.setPage(0).addFacetRefinement(e,t)),this},hc.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},hc.prototype.addFacetExclusion=function(e,t){return this._change(this.state.setPage(0).addExcludeRefinement(e,t)),this},hc.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},hc.prototype.addTag=function(e){return this._change(this.state.setPage(0).addTagRefinement(e)),this},hc.prototype.removeNumericRefinement=function(e,t,r){return this._change(this.state.setPage(0).removeNumericRefinement(e,t,r)),this},hc.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change(this.state.setPage(0).removeDisjunctiveFacetRefinement(e,t)),this},hc.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},hc.prototype.removeHierarchicalFacetRefinement=function(e){return this._change(this.state.setPage(0).removeHierarchicalFacetRefinement(e)),this},hc.prototype.removeFacetRefinement=function(e,t){return this._change(this.state.setPage(0).removeFacetRefinement(e,t)),this},hc.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},hc.prototype.removeFacetExclusion=function(e,t){return this._change(this.state.setPage(0).removeExcludeRefinement(e,t)),this},hc.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},hc.prototype.removeTag=function(e){return this._change(this.state.setPage(0).removeTagRefinement(e)),this},hc.prototype.toggleFacetExclusion=function(e,t){return this._change(this.state.setPage(0).toggleExcludeFacetRefinement(e,t)),this},hc.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},hc.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)},hc.prototype.toggleFacetRefinement=function(e,t){return this._change(this.state.setPage(0).toggleFacetRefinement(e,t)),this},hc.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},hc.prototype.toggleTag=function(e){return this._change(this.state.setPage(0).toggleTagRefinement(e)),this},hc.prototype.nextPage=function(){return this.setPage(this.state.page+1)},hc.prototype.previousPage=function(){return this.setPage(this.state.page-1)},hc.prototype.setCurrentPage=pc,hc.prototype.setPage=pc,hc.prototype.setIndex=function(e){return this._change(this.state.setPage(0).setIndex(e)),this},hc.prototype.setQueryParameter=function(e,t){return this._change(this.state.setPage(0).setQueryParameter(e,t)),this},hc.prototype.setState=function(e){return this._change(Va.make(e)),this},hc.prototype.getState=function(e){return void 0===e?this.state:this.state.filter(e)},hc.prototype.getStateAsQueryString=function(e){var t=e&&e.filters||["query","attribute:*"],r=this.getState(t);return fc.getQueryStringFromState(r,e)},hc.getConfigurationFromQueryString=fc.getStateFromQueryString,hc.getForeignConfigurationInQueryString=fc.getUnrecognizedParametersInQueryString,hc.prototype.setStateFromQueryString=function(e,t){var r=t&&t.triggerChange||!1,n=fc.getStateFromQueryString(e,t),i=this.state.setQueryParameters(n);r?this.setState(i):this.overrideStateWithoutTriggeringChangeEvent(i)},hc.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new Va(e),this},hc.prototype.isRefined=function(e,t){if(this.state.isConjunctiveFacet(e))return this.state.isFacetRefined(e,t);if(this.state.isDisjunctiveFacet(e))return this.state.isDisjunctiveFacetRefined(e,t);throw new Error(e+" is not properly defined in this helper configuration(use the facets or disjunctiveFacets keys to configure it)")},hc.prototype.hasRefinements=function(e){return!fn(this.state.getNumericRefinements(e))||(this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):!!this.state.isHierarchicalFacet(e)&&this.state.isHierarchicalFacetRefined(e))},hc.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},hc.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},hc.prototype.hasTag=function(e){return this.state.isTagRefined(e)},hc.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},hc.prototype.getIndex=function(){return this.state.index},hc.prototype.getCurrentPage=dc,hc.prototype.getPage=dc,hc.prototype.getTags=function(){return this.state.tagRefinements},hc.prototype.getQueryParameter=function(e){return this.state.getQueryParameter(e)},hc.prototype.getRefinements=function(e){var r=[];if(this.state.isConjunctiveFacet(e)){var t=this.state.getConjunctiveRefinements(e);Wi(t,function(e){r.push({value:e,type:"conjunctive"})});var n=this.state.getExcludeRefinements(e);Wi(n,function(e){r.push({value:e,type:"exclude"})})}else if(this.state.isDisjunctiveFacet(e)){var i=this.state.getDisjunctiveRefinements(e);Wi(i,function(e){r.push({value:e,type:"disjunctive"})})}var a=this.state.getNumericRefinements(e);return Wi(a,function(e,t){r.push({value:e,operator:t,type:"numeric"})}),r},hc.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)},hc.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)},hc.prototype._search=function(){var n=this.state,e=No._getQueries(n.index,n),i=[{state:n,queriesCount:e.length,helper:this}];this.emit("search",n,this.lastResults);var t=Yi(this.derivedHelpers,function(e){var t=e.getModifiedState(n),r=No._getQueries(t.index,t);return i.push({state:t,queriesCount:r.length,helper:e}),e.emit("search",t,e.lastResults),r}),r=e.concat(bi(t)),a=this._queryId++;this._currentNbQueries++;try{this.client.search(r).then(this._dispatchAlgoliaResponse.bind(this,i,a)).catch(this._dispatchAlgoliaError.bind(this,a))}catch(e){this.emit("error",e)}},hc.prototype._dispatchAlgoliaResponse=function(e,t,r){if(!(t<this._lastQueryIdReceived)){this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,0===this._currentNbQueries&&this.emit("searchQueueEmpty");var s=r.results;Wi(e,function(e){var t=e.state,r=e.queriesCount,n=e.helper,i=s.splice(0,r),a=n.lastResults=new Ro(t,i);n.emit("result",a,t)})}},hc.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",t),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},hc.prototype.containsRefinement=function(e,t,r,n){return e||0!==t.length||0!==r.length||0!==n.length},hc.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&0<this.state.disjunctiveRefinements[e].length},hc.prototype._change=function(e){e!==this.state&&(this.state=e,this.emit("change",this.state,this.lastResults))},hc.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},hc.prototype.setClient=function(e){return this.client===e||(e.addAlgoliaAgent&&!vc(e)&&e.addAlgoliaAgent("JS Helper "+lc),this.client=e),this},hc.prototype.getClient=function(){return this.client},hc.prototype.derive=function(e){var t=new Ao(this,e);return this.derivedHelpers.push(t),t},hc.prototype.detachDerivedHelper=function(e){var t=this.derivedHelpers.indexOf(e);if(-1===t)throw new Error("Derived helper already detached");this.derivedHelpers.splice(t,1)},hc.prototype.hasPendingRequests=function(){return 0<this._currentNbQueries};var mc=hc;function gc(e,t,r){return new mc(e,t,r)}gc.version=lc,gc.AlgoliaSearchHelper=mc,gc.SearchParameters=Va,gc.SearchResults=Ro,gc.url=fc;var yc=gc,bc=yc.SearchParameters,Rc=function(e,t){if(e===t)return!0;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var i=Object.prototype.hasOwnProperty,a=0;a<r.length;a++)if(!i.call(t,r[a])||e[r[a]]!==t[r[a]])return!1;return!0},xc=Promise.resolve(),Fc=function(e){xc.then(e)};function _c(e){var t=e,r=[];return{getState:function(){return t},setState:function(e){t=e,r.forEach(function(e){return e()})},subscribe:function(e){return r.push(e),function(){r.splice(r.indexOf(e),1)}}}}var jc={highlightPreTag:"<ais-highlight-0000000000>",highlightPostTag:"</ais-highlight-0000000000>"};function Pc(e){var t=e.preTag,r=e.postTag,n=e.highlightedValue,i=(void 0===n?"":n).split(t),a=i.shift(),s=""===a?[]:[{value:a,isHighlighted:!1}];if(r===t){var o=!0;i.forEach(function(e){s.push({value:e,isHighlighted:o}),o=!o})}else i.forEach(function(e){var t=e.split(r);s.push({value:t[0],isHighlighted:!0}),""!==t[1]&&s.push({value:t[1],isHighlighted:!1})});return s}var wc=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Sc=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Oc=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},Ec=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ac=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Tc=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Nc=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Cc=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)};function Ic(e){var i=e.indexName,t=e.initialState,r=void 0===t?{}:t,n=e.searchClient,a=e.resultsState,s=e.stalledSearchDelay,o=new bc(Ec({index:i},jc)),c=null,u=yc(n,i,o);u.on("result",y),u.on("error",b),u.on("search",function(){c||(c=setTimeout(function(){var e=Ei(Ec({},d.getState(),{isSearchStalled:!0}),"resultsFacetValues");d.setState(e)},s))});var f={},l={},h=u.state,p=function(e){var t=[],r=!1;function n(){r||(r=!0,Fc(function(){r=!1,e()}))}return{registerWidget:function(e){return t.push(e),n(),function(){t.splice(t.indexOf(e),1),n()}},update:n,getWidgets:function(){return t}}}(function(){var e=m(d.getState().widgets);d.setState(Ec({},d.getState(),{metadata:e,searching:!0})),g()}),d=_c({widgets:r,metadata:[],results:a||null,error:null,searching:!1,isSearchStalled:!0,searchingForFacetValues:!1}),v=!1;function m(t){return p.getWidgets().filter(function(e){return Boolean(e.getMetadata)}).map(function(e){return e.getMetadata(t)})}function g(){if(!v){var e=function(){l={};var e=p.getWidgets().filter(function(e){return Boolean(e.getSearchParameters)}).filter(function(e){return!(e.context.multiIndexContext||e.props.indexName!==i&&e.props.indexName)}).reduce(function(e,t){return t.getSearchParameters(e)},h);l[e.index]=i;var t=p.getWidgets().filter(function(e){return Boolean(e.getSearchParameters)}).filter(function(e){return e.context.multiIndexContext&&e.context.multiIndexContext.targetedIndex!==i||e.props.indexName&&e.props.indexName!==i}).reduce(function(e,t){var r=t.context.multiIndexContext?t.context.multiIndexContext.targetedIndex:t.props.indexName,n=cn(e,function(e){return e.targetedIndex===r});return n?n.widgets.push(t):e.push({targetedIndex:r,widgets:[t]}),e},[]),r=p.getWidgets().filter(function(e){return Boolean(e.getSearchParameters)}).filter(function(e){return e.context.multiIndexContext&&e.context.multiIndexContext.targetedIndex===i||e.props.indexName&&e.props.indexName===i}).reduce(function(e,t){return t.getSearchParameters(e)},e);return l[r.index]=i,{sharedParameters:e,mainIndexParameters:r,derivatedWidgets:t}}(u.state),n=e.sharedParameters,t=e.mainIndexParameters,r=e.derivatedWidgets;Object.keys(f).forEach(function(e){return f[e].detach()}),f={},u.setState(n),r.forEach(function(t){var r=t.targetedIndex,e=u.derive(function(){var e=t.widgets.reduce(function(e,t){return t.getSearchParameters(e)},n);return l[e.index]=r,e});e.on("result",y),e.on("error",b),f[r]=e}),u.setState(t),u.search()}}function y(e){var t=d.getState(),r=t.results?t.results:{};r=!fn(f)&&r.getFacetByName?{}:r,fn(f)?r=e:r[l[e.index]]=e;var n=d.getState(),i=n.isSearchStalled;u.hasPendingRequests()||(clearTimeout(c),c=null,i=!1);var a=Ei(Ec({},n,{results:r,isSearchStalled:i,searching:!1,error:null}),"resultsFacetValues");d.setState(a)}function b(e){var t=d.getState(),r=t.isSearchStalled;u.hasPendingRequests()||(clearTimeout(c),r=!1);var n=Ei(Ec({},t,{isSearchStalled:r,error:e,searching:!1}),"resultsFacetValues");d.setState(n)}return{store:d,widgetsManager:p,getWidgetsIds:function(){return d.getState().metadata.reduce(function(e,t){return void 0!==t.id?e.concat(t.id):e},[])},onExternalStateUpdate:function(e){var t=m(e);d.setState(Ec({},d.getState(),{widgets:e,metadata:t,searching:!0})),g()},transitionState:function(e){var r=d.getState().widgets;return p.getWidgets().filter(function(e){return Boolean(e.transitionState)}).reduce(function(e,t){return t.transitionState(r,e)},e)},onSearchForFacetValues:function(e){var r=e.facetName,n=e.query,t=e.maxFacetHits;d.setState(Ec({},d.getState(),{searchingForFacetValues:!0})),u.searchForFacetValues(r,n,t).then(function(e){var t;d.setState(Ec({},d.getState(),{resultsFacetValues:Ec({},d.getState().resultsFacetValues,(t={},Oc(t,r,e.facetHits),Oc(t,"query",n),t)),searchingForFacetValues:!1}))},function(e){d.setState(Ec({},d.getState(),{error:e,searchingForFacetValues:!1}))}).catch(function(e){setTimeout(function(){throw e})})},updateClient:function(e){u.setClient(e),g()},updateIndex:function(e){h=h.setIndex(e),g()},clearCache:function(){u.clearCache(),g()},skipSearch:function(){v=!0}}}var Hc=function(e){function n(e){wc(this,n);var t=Tc(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.isControlled=Boolean(e.searchState);var r=t.isControlled?e.searchState:{};return t.isUnmounting=!1,t.aisManager=Ic({indexName:e.indexName,searchClient:e.searchClient,initialState:r,resultsState:e.resultsState,stalledSearchDelay:e.stalledSearchDelay}),t}return Ac(n,e),Sc(n,[{key:"componentWillReceiveProps",value:function(e){!function(e,t){if(!e.searchState&&t.searchState)throw new Error("You can't switch <InstantSearch> from being uncontrolled to controlled");if(e.searchState&&!t.searchState)throw new Error("You can't switch <InstantSearch> from being controlled to uncontrolled")}(this.props,e),this.props.indexName!==e.indexName&&this.aisManager.updateIndex(e.indexName),this.props.refresh!==e.refresh&&e.refresh&&this.aisManager.clearCache(),this.props.searchClient!==e.searchClient&&this.aisManager.updateClient(e.searchClient),this.isControlled&&this.aisManager.onExternalStateUpdate(e.searchState)}},{key:"componentWillUnmount",value:function(){this.isUnmounting=!0,this.aisManager.skipSearch()}},{key:"getChildContext",value:function(){return this._aisContextCache||(this._aisContextCache={ais:{onInternalStateUpdate:this.onWidgetsInternalStateUpdate.bind(this),createHrefForState:this.createHrefForState.bind(this),onSearchForFacetValues:this.onSearchForFacetValues.bind(this),onSearchStateChange:this.onSearchStateChange.bind(this),onSearchParameters:this.onSearchParameters.bind(this)}}),{ais:Ec({},this._aisContextCache.ais,{store:this.aisManager.store,widgetsManager:this.aisManager.widgetsManager,mainTargetedIndex:this.props.indexName})}}},{key:"createHrefForState",value:function(e){return e=this.aisManager.transitionState(e),this.isControlled&&this.props.createURL?this.props.createURL(e,this.getKnownKeys()):"#"}},{key:"onWidgetsInternalStateUpdate",value:function(e){e=this.aisManager.transitionState(e),this.onSearchStateChange(e),this.isControlled||this.aisManager.onExternalStateUpdate(e)}},{key:"onSearchStateChange",value:function(e){this.props.onSearchStateChange&&!this.isUnmounting&&this.props.onSearchStateChange(e)}},{key:"onSearchParameters",value:function(e,t,r){if(this.props.onSearchParameters){var n=this.props.searchState?this.props.searchState:{};this.props.onSearchParameters(e,t,r,n)}}},{key:"onSearchForFacetValues",value:function(e){this.aisManager.onSearchForFacetValues(e)}},{key:"getKnownKeys",value:function(){return this.aisManager.getWidgetsIds()}},{key:"render",value:function(){var e=d.Children.count(this.props.children),t=this.props.root,r=t.Root,n=t.props;return 0===e?null:v.createElement(r,n,this.props.children)}}]),n}(d.Component);Hc.defaultProps={stalledSearchDelay:200},Hc.propTypes={indexName:D.string.isRequired,searchClient:D.object.isRequired,createURL:D.func,refresh:D.bool.isRequired,searchState:D.object,onSearchStateChange:D.func,onSearchParameters:D.func,resultsState:D.oneOfType([D.object,D.array]),children:D.node,root:D.shape({Root:D.oneOfType([D.string,D.func]),props:D.object}).isRequired,stalledSearchDelay:D.number},Hc.childContextTypes={ais:D.object.isRequired};var Qc="5.2.0-beta.2";var Dc=function(e){function i(e,t){wc(this,i);var r=Tc(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e)),n=t.ais.widgetsManager;return r.unregisterWidget=n.registerWidget(r),r}return Ac(i,e),Sc(i,[{key:"componentWillMount",value:function(){this.context.ais.onSearchParameters(this.getSearchParameters,this.getChildContext(),this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.indexName!==e.indexName&&this.context.ais.widgetsManager.update()}},{key:"componentWillUnmount",value:function(){this.unregisterWidget()}},{key:"getChildContext",value:function(){return{multiIndexContext:{targetedIndex:this.props.indexName}}}},{key:"getSearchParameters",value:function(e,t){return e.setIndex(this.props?this.props.indexName:t.indexName)}},{key:"render",value:function(){var e=d.Children.count(this.props.children),t=this.props.root,r=t.Root,n=t.props;return 0===e?null:v.createElement(r,n,this.props.children)}}]),i}(d.Component);Dc.propTypes={indexName:D.string.isRequired,children:D.node,root:D.shape({Root:D.oneOfType([D.string,D.func]),props:D.object}).isRequired},Dc.childContextTypes={multiIndexContext:D.object.isRequired},Dc.contextTypes={ais:D.object.isRequired};var Mc=Object.prototype.hasOwnProperty;var Lc=function(e,t){return null!=e&&Mc.call(e,t)};var Bc=function(e,t){return null!=e&&kr(e,t,Lc)};function kc(f){if(!f.displayName)throw new Error("`createConnector` requires you to provide a `displayName` property.");var i=Bc(f,"refine"),a=Bc(f,"searchForFacetValues"),c=Bc(f,"getSearchParameters"),u=Bc(f,"getMetadata"),l=Bc(f,"transitionState"),h=Bc(f,"cleanUp"),p=c||u||l;return function(r){var e,t,o,n;return t=e=function(e){function s(e,t){wc(this,s);var r=Tc(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,t));o.call(r);var n=t.ais,i=n.store,a=n.widgetsManager;return r.state={props:r.getProvidedProps(Ec({},e,{canRender:!1})),canRender:!1},r.unsubscribe=i.subscribe(function(){r.state.canRender&&r.setState({props:r.getProvidedProps(Ec({},r.props,{canRender:r.state.canRender}))})}),p&&(r.unregisterWidget=a.registerWidget(r)),r}return Ac(s,e),Sc(s,[{key:"getMetadata",value:function(e){return u?f.getMetadata.call(this,this.props,e):{}}},{key:"getSearchParameters",value:function(e){return c?f.getSearchParameters.call(this,e,this.props,this.context.ais.store.getState().widgets):null}},{key:"transitionState",value:function(e,t){return l?f.transitionState.call(this,this.props,e,t):t}},{key:"componentDidMount",value:function(){this.setState({canRender:!0})}},{key:"componentWillMount",value:function(){f.getSearchParameters&&this.context.ais.onSearchParameters(f.getSearchParameters,this.context,this.props)}},{key:"componentWillReceiveProps",value:function(e){ia(this.props,e)||(this.setState({props:this.getProvidedProps(e)}),p&&(this.context.ais.widgetsManager.update(),f.transitionState&&this.context.ais.onSearchStateChange(f.transitionState.call(this,e,this.context.ais.store.getState().widgets,this.context.ais.store.getState().widgets))))}},{key:"componentWillUnmount",value:function(){if(this.unsubscribe(),p&&(this.unregisterWidget(),h)){var e=f.cleanUp.call(this,this.props,this.context.ais.store.getState().widgets);this.context.ais.store.setState(Ec({},this.context.ais.store.getState(),{widgets:e})),this.context.ais.onSearchStateChange(function r(n){return Object.keys(n).forEach(function(e){var t=n[e];fn(t)&&di(t)?delete n[e]:di(t)&&r(t)}),n}(e))}}},{key:"shouldComponentUpdate",value:function(e,t){var r=Rc(this.props,e);return null===this.state.props||null===t.props?this.state.props!==t.props||!r:!r||!Rc(this.state.props,t.props)}},{key:"render",value:function(){if(null===this.state.props)return null;var e=i?{refine:this.refine,createURL:this.createURL}:{},t=a?{searchForItems:this.searchForFacetValues}:{};return v.createElement(r,Ec({},this.props,this.state.props,e,t))}}]),s}(d.Component),e.displayName=f.displayName+"("+((n=r).displayName||n.name||"UnknownComponent")+")",e.defaultClassNames=r.defaultClassNames,e.propTypes=f.propTypes,e.defaultProps=f.defaultProps,e.contextTypes={ais:D.object.isRequired,multiIndexContext:D.object},o=function(){var u=this;this.getProvidedProps=function(e){var t=u.context.ais.store.getState(),r=t.results,n=t.searching,i=t.error,a=t.widgets,s=t.metadata,o=t.resultsFacetValues,c={results:r,searching:n,error:i,searchingForFacetValues:t.searchingForFacetValues,isSearchStalled:t.isSearchStalled};return f.getProvidedProps.call(u,e,a,c,s,o)},this.refine=function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];u.context.ais.onInternalStateUpdate((e=f.refine).call.apply(e,[u,u.props,u.context.ais.store.getState().widgets].concat(r)))},this.searchForFacetValues=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];u.context.ais.onSearchForFacetValues(f.searchForFacetValues.apply(f,[u.props,u.context.ais.store.getState().widgets].concat(t)))},this.createURL=function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return u.context.ais.createHrefForState((e=f.refine).call.apply(e,[u,u.props,u.context.ais.store.getState().widgets].concat(r)))},this.cleanUp=function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=f.cleanUp).call.apply(e,[u].concat(r))}},t}}var Uc=function(e,t,r,n){var i=-1,a=Ci,s=!0,o=e.length,c=[],u=t.length;if(!o)return c;r&&(t=Ar(t,At(r))),n?(a=Ii,s=!1):200<=t.length&&(a=et,s=!1,t=new Ze(t));e:for(;++i<o;){var f=e[i],l=null==r?f:r(f);if(f=n||0!==f?f:0,s&&l==l){for(var h=u;h--;)if(t[h]===l)continue e;c.push(f)}else a(t,l,n)||c.push(f)}return c},qc=Di(function(e,t){return Mi(e)?Uc(e,yi(t,1,Mi,!0)):[]});function Vc(e){return e&&e.multiIndexContext?e.multiIndexContext.targetedIndex:e.ais.mainTargetedIndex}function zc(e,t){return e.results&&!e.results.hits?e.results[Vc(t)]?e.results[Vc(t)]:null:e.results?e.results:null}function Wc(e){return e&&e.multiIndexContext}function $c(t,e,r,n,i){return Wc(r)?i?(d=t,v=e,m=n,g=i,b=Vc(r),R=m?{page:1}:void 0,x=Bc(d,"indices."+b)?Ec({},d.indices,Oc({},b,Ec({},d.indices[b],(Oc(y={},g,Ec({},d.indices[b][g],v)),Oc(y,"page",1),y)))):Ec({},d.indices,Oc({},b,Ec(Oc({},g,v),R))),Ec({},d,{indices:x})):(u=t,f=e,l=n?{page:1}:void 0,h=Vc(r),p=Bc(u,"indices."+h)?Ec({},u.indices,Oc({},h,Ec({},u.indices[h],f,l))):Ec({},u.indices,Oc({},h,Ec({},f,l))),Ec({},u,{indices:p})):(t.indices&&n&&Object.keys(t.indices).forEach(function(e){t=$c(t,{page:1},{multiIndexContext:{targetedIndex:e}},!0,i)}),i?(s=e,c=n?{page:1}:void 0,Ec({},a=t,Oc({},o=i,Ec({},a[o],s)),c)):Ec({},t,e,n?{page:1}:void 0));var a,s,o,c,u,f,l,h,p,d,v,m,g,y,b,R,x}function Kc(e){var t=e.match(/^([^.]*)\.(.*)/);return{namespace:t&&t[1],attributeName:t&&t[2]}}function Jc(e,t,r,n,i,a){var s=Vc(r),o=Kc(n),c=o.namespace,u=o.attributeName;if(Wc(r)&&t.indices&&c&&t.indices[""+s]&&Bc(t.indices[""+s][c],""+u)||Wc(r)&&t.indices&&Bc(t,"indices."+s+"."+n)||!Wc(r)&&c&&Bc(t[c],u)||!Wc(r)&&Bc(t,n)){return a(Wc(r)?c?Lr(t.indices[""+s][c],u):Lr(t.indices[s],n):c?Lr(t[c],u):Lr(t,n))}return e.defaultRefinement?e.defaultRefinement:i}function Yc(e,t,r){var n=Vc(t),i=Kc(r),a=i.namespace,s=i.attributeName;return Wc(t)&&Boolean(e.indices)?function(e){var t=e.searchState,r=e.indexName,n=e.id,i=e.namespace,a=e.attribute,s=t.indices[r];if(i&&s)return Ec({},t,{indices:Ec({},t.indices,Oc({},r,Ec({},s,Oc({},i,Ei(s[i],a)))))});return Ei(t,"indices."+r+"."+n)}({attribute:s,searchState:e,indexName:n,id:r,namespace:a}):function(e){var t=e.searchState,r=e.id,n=e.namespace,i=e.attribute;if(n)return Ec({},t,Oc({},n,Ei(t[n],i)));return Ei(t,r)}({attribute:s,searchState:e,id:r,namespace:a})}var Gc=kc({displayName:"AlgoliaConfigure",getProvidedProps:function(){return{}},getSearchParameters:function(e,t){var r=Ei(t,"children");return e.setQueryParameters(r)},transitionState:function(e,t,r){var n=Ei(e,"children"),i=this._props?qc(qt(this._props),qt(e)):[];return this._props=e,$c(r,Oc({},"configure",Ec({},Ei(r.configure,i),n)),this.context)},cleanUp:function(r,e){var n="configure",t=Vc(this.context),i=Wc(this.context)&&e.indices?e.indices[t]:e,a=(i&&i[n]?Object.keys(i[n]):[]).reduce(function(e,t){return r[t]||(e[t]=i[n][t]),e},{});return $c(e,Oc({},n,a),this.context)}}),Zc=Gc(function(){return null});function Xc(e,t,r){return Jc(e,t,r,"query","",function(e){return e||""})}var eu=kc({displayName:"AlgoliaAutoComplete",getProvidedProps:function(e,t,r){return{hits:(n=r,n.results?n.results.hits&&Array.isArray(n.results.hits)?n.results.hits:Object.keys(n.results).reduce(function(e,t){return[].concat(Cc(e),[{index:t,hits:n.results[t].hits}])},[]):[]),currentRefinement:Xc(e,t,this.context)};var n},refine:function(e,t,r){return n=t,i=r,a=this.context,$c(n,Oc({},"query",i),a,!0);var n,i,a},cleanUp:function(e,t){return r=t,n=this.context,Yc(r,n,"query");var r,n},getSearchParameters:function(e,t,r){return e.setQuery(Xc(t,r,this.context))}}),tu=function(e){return e.attributes[0]};var ru=kc({displayName:"AlgoliaBreadcrumb",propTypes:{attributes:function(e,t,r){if(!Array.isArray(e[t])||e[t].some(function(e){return"string"!=typeof e})||e[t].length<1)return new Error("Invalid prop "+t+" supplied to "+r+". Expected an Array of Strings")},transformItems:D.func},getProvidedProps:function(e,t,r){var n=tu(e),i=zc(r,this.context);if(!(Boolean(i)&&Boolean(i.getFacetByName(n))))return{items:[],canRefine:!1};var a=i.getFacetValues(n),s=a.data?function r(e){return e.reduce(function(e,t){return t.isRefined&&(e.push({label:t.name,value:t.path}),t.data&&(e=e.concat(r(t.data)))),e},[])}(a.data):[],o=e.transformItems?e.transformItems(s):s;return{canRefine:0<o.length,items:o}},refine:function(e,t,r){return n=e,i=t,a=r,s=this.context,o=tu(n),$c(i,Oc({},o,a||""),s,!0,"hierarchicalMenu");var n,i,a,s,o}}),nu=kc({displayName:"AlgoliaCurrentRefinements",propTypes:{transformItems:D.func},getProvidedProps:function(r,e,t,n){var i=n.reduce(function(e,t){return void 0!==t.items&&(r.clearsQuery||"query"!==t.id)?r.clearsQuery&&"query"===t.id&&""===t.items[0].currentRefinement?e:e.concat(t.items.map(function(e){return Ec({},e,{id:t.id,index:t.index})})):e},[]);return{items:r.transformItems?r.transformItems(i):i,canRefine:0<i.length}},refine:function(e,t,r){return(r instanceof Array?r.map(function(e){return e.value}):[r]).reduce(function(e,t){return t(e)},t)}}),iu=function(e){return e.attributes[0]},au="hierarchicalMenu";function su(e,t,r){return Jc(e,t,r,au+"."+iu(e),null,function(e){return""===e?null:e})}function ou(e,l,h,p){return e.map(function(e){return{label:e.name,value:(t=e.path,r=l,n=h,i=p,a=r.id,s=r.attributes,o=r.separator,c=r.rootPath,u=r.showParentLevel,f=su(r,n,i),null===f?t:new bc({hierarchicalFacets:[{name:a,attributes:s,separator:o,rootPath:c,showParentLevel:u}]}).toggleHierarchicalFacetRefinement(a,f).toggleHierarchicalFacetRefinement(a,t).getHierarchicalRefinement(a)[0]),count:e.count,isRefined:e.isRefined,items:e.data&&ou(e.data,l,h,p)};var t,r,n,i,a,s,o,c,u,f})}function cu(e,t,r,n){var i=iu(e);return $c(t,Oc({},i,r||""),n,!0,au)}var uu=["name:asc"],fu=kc({displayName:"AlgoliaHierarchicalMenu",propTypes:{attributes:function(e,t,r){if(!Array.isArray(e[t])||e[t].some(function(e){return"string"!=typeof e})||e[t].length<1)return new Error("Invalid prop "+t+" supplied to "+r+". Expected an Array of Strings")},separator:D.string,rootPath:D.string,showParentLevel:D.bool,defaultRefinement:D.string,showMore:D.bool,limit:D.number,showMoreLimit:D.number,transformItems:D.func},defaultProps:{showMore:!1,limit:10,showMoreLimit:20,separator:" > ",rootPath:null,showParentLevel:!0},getProvidedProps:function(e,t,r){var n=e.showMore,i=e.limit,a=e.showMoreLimit,s=iu(e),o=zc(r,this.context);if(!(Boolean(o)&&Boolean(o.getFacetByName(s))))return{items:[],currentRefinement:su(e,t,this.context),canRefine:!1};var c=n?a:i,u=o.getFacetValues(s,{sortBy:uu}),f=u.data?ou(u.data,e,t,this.context):[];return{items:function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return e.slice(0,r).map(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(e.items)?Ec({},e,{items:t(e.items,r)}):e})}(e.transformItems?e.transformItems(f):f,c),currentRefinement:su(e,t,this.context),canRefine:0<f.length}},refine:function(e,t,r){return cu(e,t,r,this.context)},cleanUp:function(e,t){return r=e,n=t,i=this.context,Yc(n,i,au+"."+iu(r));var r,n,i},getSearchParameters:function(e,t,r){var n=t.attributes,i=t.separator,a=t.rootPath,s=t.showParentLevel,o=t.showMore,c=t.limit,u=t.showMoreLimit,f=iu(t),l=o?u:c;e=e.addHierarchicalFacet({name:f,attributes:n,separator:i,rootPath:a,showParentLevel:s}).setQueryParameters({maxValuesPerFacet:Math.max(e.maxValuesPerFacet||0,l)});var h=su(t,r,this.context);return null!==h&&(e=e.toggleHierarchicalFacetRefinement(f,h)),e},getMetadata:function(t,e){var r=this,n=t.attributes[0],i=iu(t),a=su(t,e,this.context);return{id:i,index:Vc(this.context),items:a?[{label:n+": "+a,attribute:n,value:function(e){return cu(t,e,"",r.context)},currentRefinement:a}]:[]}}}),lu=function(e){var t=e.attribute,r=e.hit,n=e.highlightProperty,i=e.preTag,a=void 0===i?jc.highlightPreTag:i,s=e.postTag;return function(e){var t=e.preTag,r=void 0===t?"<em>":t,n=e.postTag,i=void 0===n?"</em>":n,a=e.highlightProperty,s=e.attribute,o=e.hit;if(!o)throw new Error("`hit`, the matching record, must be provided");var c=Lr(o[a],s,{});return Array.isArray(c)?c.map(function(e){return Pc({preTag:r,postTag:i,highlightedValue:e.value})}):Pc({preTag:r,postTag:i,highlightedValue:c.value})}({attribute:t,highlightProperty:n,hit:r,preTag:a,postTag:void 0===s?jc.highlightPostTag:s})},hu=kc({displayName:"AlgoliaHighlighter",propTypes:{},getProvidedProps:function(){return{highlight:lu}}}),pu=kc({displayName:"AlgoliaHits",getProvidedProps:function(e,t,r){var n=zc(r,this.context);return{hits:n?n.hits:[]}},getSearchParameters:function(e){return e}});function du(e,t,r){return Jc(e,t,r,"hitsPerPage",null,function(e){return"string"==typeof e?parseInt(e,10):e})}var vu=kc({displayName:"AlgoliaHitsPerPage",propTypes:{defaultRefinement:D.number.isRequired,items:D.arrayOf(D.shape({label:D.string,value:D.number.isRequired})).isRequired,transformItems:D.func},getProvidedProps:function(e,t){var r=du(e,t,this.context),n=e.items.map(function(e){return e.value===r?Ec({},e,{isRefined:!0}):Ec({},e,{isRefined:!1})});return{items:e.transformItems?e.transformItems(n):n,currentRefinement:r}},refine:function(e,t,r){return $c(t,Oc({},"hitsPerPage",r),this.context,!0)},cleanUp:function(e,t){return Yc(t,this.context,"hitsPerPage")},getSearchParameters:function(e,t,r){return e.setHitsPerPage(du(t,r,this.context))},getMetadata:function(){return{id:"hitsPerPage"}}});function mu(e,t,r){return Jc(e,t,r,"page",1,function(e){return"string"==typeof e&&(e=parseInt(e,10)),e})}var gu=kc({displayName:"AlgoliaInfiniteHits",getProvidedProps:function(e,t,r){var n=zc(r,this.context);if(this._allResults=this._allResults||[],this._previousPage=this._previousPage||0,!n)return{hits:[],hasMore:!1};var i=n.hits,a=n.page,s=n.nbPages;0===a?this._allResults=i:a>this._previousPage?this._allResults=[].concat(Cc(this._allResults),Cc(i)):a<this._previousPage&&(this._allResults=i);var o=a<s-1;return this._previousPage=a,{hits:this._allResults,hasMore:o}},getSearchParameters:function(e,t,r){return e.setQueryParameters({page:mu(t,r,this.context)-1})},refine:function(e,t){var r=mu(e,t,this.context)+1;return $c(t,Oc({},"page",r),this.context,!1)}}),yu="menu";function bu(e){return e.attribute}function Ru(e,t,r){return Jc(e,t,r,yu+"."+bu(e),null,function(e){return""===e?null:e})}function xu(e,t,r,n){return e===Ru(t,r,n)?"":e}function Fu(e){var t=e.showMore,r=e.limit,n=e.showMoreLimit;return t?n:r}function _u(e,t,r,n){var i=bu(e);return $c(t,Oc({},i,r||""),n,!0,yu)}var ju=["count:desc","name:asc"],Pu=kc({displayName:"AlgoliaMenu",propTypes:{attribute:D.string.isRequired,showMore:D.bool,limit:D.number,showMoreLimit:D.number,defaultRefinement:D.string,transformItems:D.func,searchable:D.bool},defaultProps:{showMore:!1,limit:10,showMoreLimit:20},getProvidedProps:function(t,r,e,n,i){var a=this,s=t.attribute,o=t.searchable,c=zc(e,this.context),u=Boolean(c)&&Boolean(c.getFacetByName(s)),f=Boolean(i&&i[s]&&""!==i.query);if(o&&this.context.multiIndexContext)throw new Error("react-instantsearch: searching in *List is not available when used inside a multi index context");if(!u)return{items:[],currentRefinement:Ru(t,r,this.context),isFromSearch:f,searchable:o,canRefine:u};var l=f?i[s].map(function(e){return{label:e.value,value:xu(e.value,t,r,a.context),_highlightResult:{label:{value:e.highlighted}},count:e.count,isRefined:e.isRefined}}):c.getFacetValues(s,{sortBy:ju}).map(function(e){return{label:e.name,value:xu(e.name,t,r,a.context),count:e.count,isRefined:e.isRefined}}),h=o&&!f?rs(l,["isRefined","count","label"],["desc","desc","asc"]):l;return{items:(t.transformItems?t.transformItems(h):h).slice(0,Fu(t)),currentRefinement:Ru(t,r,this.context),isFromSearch:f,searchable:o,canRefine:0<l.length}},refine:function(e,t,r){return _u(e,t,r,this.context)},searchForFacetValues:function(e,t,r){return{facetName:e.attribute,query:r,maxFacetHits:Fu(e)}},cleanUp:function(e,t){return r=e,n=t,i=this.context,Yc(n,i,yu+"."+bu(r));var r,n,i},getSearchParameters:function(e,t,r){var n=t.attribute;e=(e=e.setQueryParameters({maxValuesPerFacet:Math.max(e.maxValuesPerFacet||0,Fu(t))})).addDisjunctiveFacet(n);var i=Ru(t,r,this.context);return null!==i&&(e=e.addDisjunctiveFacetRefinement(n,i)),e},getMetadata:function(t,e){var r=this,n=bu(t),i=Ru(t,e,this.context);return{id:n,index:Vc(this.context),items:null===i?[]:[{label:t.attribute+": "+i,attribute:t.attribute,value:function(e){return _u(t,e,"",r.context)},currentRefinement:i}]}}});function wu(e){return void 0===e.start&&void 0===e.end?"":(e.start?e.start:"")+":"+(e.end?e.end:"")}var Su="multiRange";function Ou(e){return e.attribute}function Eu(e,t,r){return Jc(e,t,r,Su+"."+Ou(e),"",function(e){return""===e?"":e})}function Au(e,t,r,n){return $c(t,Oc({},Ou(e),r),n,!0,Su)}var Tu=kc({displayName:"AlgoliaNumericMenu",propTypes:{id:D.string,attribute:D.string.isRequired,items:D.arrayOf(D.shape({label:D.node,start:D.number,end:D.number})).isRequired,transformItems:D.func},getProvidedProps:function(v,e,t){var r=v.attribute,m=Eu(v,e,this.context),g=zc(t,this.context),n=v.items.map(function(e){var t,r,n,i,a,s,o,c,u,f,l,h,p,d=wu(e);return{label:e.label,value:d,isRefined:d===m,noRefinement:!!g&&(t=Ou(v),r=g,n=d,f=r.getFacetByName(t)?r.getFacetStats(t):null,l=n.split(":"),h=0===Number(l[0])||""===n?Number.NEGATIVE_INFINITY:Number(l[0]),p=0===Number(l[1])||""===n?Number.POSITIVE_INFINITY:Number(l[1]),!(Boolean(f)&&(c=h,u=p,(o=f).min>c&&o.min<u||o.max>c&&o.max<u||(s=p,(a=h)>(i=f).min&&a<i.max||s>i.min&&s<i.max))))}}),i=g&&g.getFacetByName(r)?g.getFacetStats(r):null,a=cn(n,function(e){return!0===e.isRefined});return n.some(function(e){return""===e.value})||n.push({value:"",isRefined:fn(a),noRefinement:!i,label:"All"}),{items:v.transformItems?v.transformItems(n):n,currentRefinement:m,canRefine:0<n.length&&n.some(function(e){return!1===e.noRefinement})}},refine:function(e,t,r){return Au(e,t,r,this.context)},cleanUp:function(e,t){return r=e,n=t,i=this.context,Yc(n,i,Su+"."+Ou(r));var r,n,i},getSearchParameters:function(e,t,r){var n=t.attribute,i=function(e){if(0===e.length)return{start:null,end:null};var t=e.split(":"),r=Nc(t,2),n=r[0],i=r[1];return{start:0<n.length?parseInt(n,10):null,end:0<i.length?parseInt(i,10):null}}(Eu(t,r,this.context)),a=i.start,s=i.end;return e=e.addDisjunctiveFacet(n),a&&(e=e.addNumericRefinement(n,">=",a)),s&&(e=e.addNumericRefinement(n,"<=",s)),e},getMetadata:function(t,e){var r=this,n=Ou(t),i=Eu(t,e,this.context),a=[],s=Vc(this.context);if(""!==i){var o=cn(t.items,function(e){return wu(e)===i}).label;a.push({label:t.attribute+": "+o,attribute:t.attribute,currentRefinement:o,value:function(e){return Au(t,e,"",r.context)}})}return{id:n,index:s,items:a}}});function Nu(e,t,r){return Jc(e,t,r,"page",1,function(e){return"string"==typeof e?parseInt(e,10):e})}var Cu=kc({displayName:"AlgoliaPagination",getProvidedProps:function(e,t,r){var n=zc(r,this.context);if(!n)return null;var i=n.nbPages;return{nbPages:i,currentRefinement:Nu(e,t,this.context),canRefine:1<i}},refine:function(e,t,r){return n=t,i=r,a=this.context,$c(n,Oc({},"page",i),a,!1);var n,i,a},cleanUp:function(e,t){return Yc(t,this.context,"page")},getSearchParameters:function(e,t,r){return e.setPage(Nu(t,r,this.context)-1)},getMetadata:function(){return{id:"page"}}}),Iu=kc({displayName:"AlgoliaPoweredBy",propTypes:{},getProvidedProps:function(e){return{url:"https://www.algolia.com/?utm_source=react-instantsearch&utm_medium=website&utm_content="+(e.canRender?location.hostname:"")+"&utm_campaign=poweredby"}}}),Hu=ee.isFinite;var Qu=function(e){return"number"==typeof e&&Hu(e)};function Du(e){return e.attribute}var Mu="range";function Lu(s,e,t,r){var n=Jc(s,e,r,Mu+"."+Du(s),{},function(e){var t=e.min,r=e.max,n=Boolean(s.precision),i=t;"string"==typeof i&&(i=n?parseFloat(i):parseInt(i,10));var a=r;return"string"==typeof a&&(a=n?parseFloat(a):parseInt(a,10)),{min:i,max:a}}),i=void 0!==s.min,a=void 0!==s.max,o=void 0!==n.min,c=void 0!==n.max;if(i&&o&&n.min<t.min)throw Error("You can't provide min value lower than range.");if(a&&c&&n.max>t.max)throw Error("You can't provide max value greater than range.");return i&&!o&&(n.min=t.min),a&&!c&&(n.max=t.max),n}function Bu(e,t){return{min:void 0!==e.min?e.min:t.min,max:void 0!==e.max?e.max:t.max}}function ku(e,t,r,n){return e||r!==n?e&&t?r:n:void 0}function Uu(e,t,r,n,i){var a=r.min,s=r.max,o=n.min,c=n.max,u=void 0===a||""===a,f=void 0===s||""===s,l=u?void 0:parseFloat(a),h=f?void 0:parseFloat(s),p=u||Qu(l),d=f||Qu(h);if(!p||!d)throw Error("You can't provide non finite values to the range connector.");if(l<o)throw Error("You can't provide min value lower than range.");if(c<h)throw Error("You can't provide max value greater than range.");var v=Du(e);return $c(t,Oc({},v,{min:ku(void 0!==e.min,u,o,l),max:ku(void 0!==e.max,f,c,h)}),i,!0,Mu)}var qu=kc({displayName:"AlgoliaRange",propTypes:{id:D.string,attribute:D.string.isRequired,defaultRefinement:D.shape({min:D.number,max:D.number}),min:D.number,max:D.number,precision:D.number,header:D.node,footer:D.node},defaultProps:{precision:0},getProvidedProps:function(e,t,r){var n=e.attribute,i=e.precision,a=e.min,s=e.max,o=zc(r,this.context),c=o&&o.getFacetByName(n),u=c&&o.getFacetStats(n)||{},f=(c?o.getFacetValues(n):[]).map(function(e){return{value:e.name,count:e.count}}),l=function(e,t,r){var n=Math.pow(10,r),i=void 0;i=Qu(e.min)?e.min:Qu(t.min)?t.min:void 0;var a=void 0;return a=Qu(e.max)?e.max:Qu(t.max)?t.max:void 0,{min:void 0!==i?Math.floor(i*n)/n:i,max:void 0!==a?Math.ceil(a*n)/n:a}}({min:a,max:s},u,i),h=l.min,p=l.max;this._currentRange={min:h,max:p};var d=Lu(e,t,this._currentRange,this.context);return{min:h,max:p,canRefine:0<f.length,currentRefinement:Bu(d,this._currentRange),count:f,precision:i}},refine:function(e,t,r){return Uu(e,t,r,this._currentRange,this.context)},cleanUp:function(e,t){return r=e,n=t,i=this.context,Yc(n,i,Mu+"."+Du(r));var r,n,i},getSearchParameters:function(e,t,r){var n=t.attribute,i=Lu(t,r,this._currentRange,this.context),a=i.min,s=i.max;return e=e.addDisjunctiveFacet(n),void 0!==a&&(e=e.addNumericRefinement(n,">=",a)),void 0!==s&&(e=e.addNumericRefinement(n,"<=",s)),e},getMetadata:function(t,e){var r=this,n=this._currentRange,i=n.min,a=n.max,s=Lu(t,e,this._currentRange,this.context),o=s.min,c=s.max,u=[],f=void 0!==o,l=void 0!==c;if(f&&o!==i||l&&c!==a){var h=[f?o+" <= ":"",t.attribute,l?" <= "+c:""];u.push({label:h.join(""),attribute:t.attribute,value:function(e){return Uu(t,e,{},r._currentRange,r.context)},currentRefinement:Bu({min:o,max:c},{min:i,max:a})})}return{id:Du(t),index:Vc(this.context),items:u}}}),Vu="refinementList";function zu(e){return e.attribute}function Wu(e,t,r){return Jc(e,t,r,Vu+"."+zu(e),[],function(e){return"string"==typeof e?""===e?[]:[e]:e})}function $u(t,e,r,n){var i=Wu(e,r,n);return-1===i.indexOf(t)?i.concat([t]):i.filter(function(e){return e!==t})}function Ku(e){var t=e.showMore,r=e.limit,n=e.showMoreLimit;return t?n:r}function Ju(e,t,r,n){var i=zu(e);return $c(t,Oc({},i,0<r.length?r:""),n,!0,Vu)}var Yu=["isRefined","count:desc","name:asc"],Gu=kc({displayName:"AlgoliaRefinementList",propTypes:{id:D.string,attribute:D.string.isRequired,operator:D.oneOf(["and","or"]),showMore:D.bool,limit:D.number,showMoreLimit:D.number,defaultRefinement:D.arrayOf(D.oneOfType([D.string,D.number])),searchable:D.bool,transformItems:D.func},defaultProps:{operator:"or",showMore:!1,limit:10,showMoreLimit:20},getProvidedProps:function(t,r,e,n,i){var a=this,s=t.attribute,o=t.searchable,c=zc(e,this.context),u=Boolean(c)&&Boolean(c.getFacetByName(s)),f=Boolean(i&&i[s]&&""!==i.query);if(o&&this.context.multiIndexContext)throw new Error("react-instantsearch: searching in *List is not available when used inside a multi index context");if(!u)return{items:[],currentRefinement:Wu(t,r,this.context),canRefine:u,isFromSearch:f,searchable:o};var l=f?i[s].map(function(e){return{label:e.value,value:$u(e.value,t,r,a.context),_highlightResult:{label:{value:e.highlighted}},count:e.count,isRefined:e.isRefined}}):c.getFacetValues(s,{sortBy:Yu}).map(function(e){return{label:e.name,value:$u(e.name,t,r,a.context),count:e.count,isRefined:e.isRefined}});return{items:(t.transformItems?t.transformItems(l):l).slice(0,Ku(t)),currentRefinement:Wu(t,r,this.context),isFromSearch:f,searchable:o,canRefine:0<l.length}},refine:function(e,t,r){return Ju(e,t,r,this.context)},searchForFacetValues:function(e,t,r){return{facetName:e.attribute,query:r,maxFacetHits:Ku(e)}},cleanUp:function(e,t){return r=e,n=t,i=this.context,Yc(n,i,Vu+"."+zu(r));var r,n,i},getSearchParameters:function(e,t,r){var n=t.attribute,i="and"===t.operator?"addFacet":"addDisjunctiveFacet",a=i+"Refinement";return e=(e=e.setQueryParameters({maxValuesPerFacet:Math.max(e.maxValuesPerFacet||0,Ku(t))}))[i](n),Wu(t,r,this.context).reduce(function(e,t){return e[a](n,t)},e)},getMetadata:function(n,i){var e=zu(n),a=this.context;return{id:e,index:Vc(this.context),items:0<Wu(n,i,a).length?[{attribute:n.attribute,label:n.attribute+": ",currentRefinement:Wu(n,i,a),value:function(e){return Ju(n,e,[],a)},items:Wu(n,i,a).map(function(r){return{label:""+r,value:function(e){var t=Wu(n,e,a).filter(function(e){return e!==r});return Ju(n,i,t,a)}}})}]:[]}}}),Zu=kc({displayName:"AlgoliaScrollTo",propTypes:{scrollOn:D.string},defaultProps:{scrollOn:"page"},getProvidedProps:function(e,t){var r=e.scrollOn,n=Jc(e,t,this.context,r,null,function(e){return e});if(this._prevSearchState||(this._prevSearchState={}),Wc(this.context)){var i=Vc(this.context);t=t.indices?t.indices[i]:{}}var a=Ei(Ei(t,"configure"),r),s=Rc(this._prevSearchState,a);return this._prevSearchState=a,{value:n,hasNotChanged:s}}});function Xu(e,t,r){return Jc(e,t,r,"query","",function(e){return e||""})}function ef(e,t,r,n){return $c(t,Oc({},"query",r),n,!0)}var tf=kc({displayName:"AlgoliaSearchBox",propTypes:{defaultRefinement:D.string},getProvidedProps:function(e,t,r){return{currentRefinement:Xu(e,t,this.context),isSearchStalled:r.isSearchStalled}},refine:function(e,t,r){return ef(0,t,r,this.context)},cleanUp:function(e,t){return r=t,n=this.context,Yc(r,n,"query");var r,n},getSearchParameters:function(e,t,r){return e.setQuery(Xu(t,r,this.context))},getMetadata:function(e,t){var r=this,n=Xu(e,t,this.context);return{id:"query",index:Vc(this.context),items:null===n?[]:[{label:"query: "+n,value:function(e){return ef(0,e,"",r.context)},currentRefinement:n}]}}});function rf(e,t,r){return Jc(e,t,r,"sortBy",null,function(e){return e||null})}var nf=kc({displayName:"AlgoliaSortBy",propTypes:{defaultRefinement:D.string,items:D.arrayOf(D.shape({label:D.string,value:D.string.isRequired})).isRequired,transformItems:D.func},getProvidedProps:function(e,t){var r=rf(e,t,this.context),n=e.items.map(function(e){return e.value===r?Ec({},e,{isRefined:!0}):Ec({},e,{isRefined:!1})});return{items:e.transformItems?e.transformItems(n):n,currentRefinement:r}},refine:function(e,t,r){return $c(t,Oc({},"sortBy",r),this.context,!0)},cleanUp:function(e,t){return Yc(t,this.context,"sortBy")},getSearchParameters:function(e,t,r){var n=rf(t,r,this.context);return e.setIndex(n)},getMetadata:function(){return{id:"sortBy"}}}),af=kc({displayName:"AlgoliaStateResults",getProvidedProps:function(e,t,r){return{searchState:t,searchResults:zc(r,this.context),allSearchResults:r.results,searching:r.searching,isSearchStalled:r.isSearchStalled,error:r.error,searchingForFacetValues:r.searchingForFacetValues,props:e}}}),sf=kc({displayName:"AlgoliaStats",getProvidedProps:function(e,t,r){var n=zc(r,this.context);return n?{nbHits:n.nbHits,processingTimeMS:n.processingTimeMS}:null}});function of(e){return e.attribute}var cf="toggle";function uf(e,t,r){return Jc(e,t,r,cf+"."+of(e),!1,function(e){return e||!1})}function ff(e,t,r,n){var i=of(e);return $c(t,Oc({},i,r||!1),n,!0,cf)}var lf=kc({displayName:"AlgoliaToggle",propTypes:{label:D.string,filter:D.func,attribute:D.string,value:D.any,defaultRefinement:D.bool},getProvidedProps:function(e,t){return{currentRefinement:uf(e,t,this.context)}},refine:function(e,t,r){return ff(e,t,r,this.context)},cleanUp:function(e,t){return r=e,n=t,i=this.context,Yc(n,i,cf+"."+of(r));var r,n,i},getSearchParameters:function(e,t,r){var n=t.attribute,i=t.value,a=t.filter;return uf(t,r,this.context)&&(n&&(e=e.addFacet(n).addFacetRefinement(n,i)),a&&(e=a(e))),e},getMetadata:function(t,e){var r=this,n=of(t),i=uf(t,e,this.context),a=[],s=Vc(this.context);return i&&a.push({label:t.label,currentRefinement:i,attribute:t.attribute,value:function(e){return ff(t,e,!1,r.context)}}),{id:n,index:s,items:a}}});e.createInstantSearch=function(s,e){var t,r;return r=t=function(e){function a(){var e;wc(this,a);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=Tc(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(r)));if(i.props.searchClient&&(i.props.appId||i.props.apiKey||i.props.algoliaClient))throw new Error("react-instantsearch:: `searchClient` cannot be used with `appId`, `apiKey` or `algoliaClient`.");return i.props.algoliaClient&&console.warn("`algoliaClient` option was renamed `searchClient`. Please use this new option before the next major version."),i.client=i.props.searchClient||i.props.algoliaClient||s(i.props.appId,i.props.apiKey,{_useRequestCache:!0}),"function"==typeof i.client.addAlgoliaAgent&&i.client.addAlgoliaAgent("react-instantsearch "+Qc),i}return Ac(a,e),Sc(a,[{key:"componentWillReceiveProps",value:function(e){var t=this.props;e.searchClient?this.client=e.searchClient:e.algoliaClient?this.client=e.algoliaClient:t.appId===e.appId&&t.apiKey===e.apiKey||(this.client=s(e.appId,e.apiKey)),"function"==typeof this.client.addAlgoliaAgent&&this.client.addAlgoliaAgent("react-instantsearch "+Qc)}},{key:"render",value:function(){return v.createElement(Hc,{createURL:this.props.createURL,indexName:this.props.indexName,searchState:this.props.searchState,onSearchStateChange:this.props.onSearchStateChange,onSearchParameters:this.props.onSearchParameters,root:this.props.root,searchClient:this.client,algoliaClient:this.client,refresh:this.props.refresh,resultsState:this.props.resultsState},this.props.children)}}]),a}(d.Component),t.propTypes={algoliaClient:D.object,searchClient:D.object,appId:D.string,apiKey:D.string,children:D.oneOfType([D.arrayOf(D.node),D.node]),indexName:D.string.isRequired,createURL:D.func,searchState:D.object,refresh:D.bool.isRequired,onSearchStateChange:D.func,onSearchParameters:D.func,resultsState:D.oneOfType([D.object,D.array]),root:D.shape({Root:D.oneOfType([D.string,D.func]).isRequired,props:D.object})},t.defaultProps={refresh:!1,root:e},r},e.createIndex=function(e){var t=function(e){var t=e.indexName,r=e.root,n=e.children;return v.createElement(Dc,{indexName:t,root:r},n)};return t.propTypes={indexName:D.string.isRequired,root:D.shape({Root:D.oneOfType([D.string,D.func]).isRequired,props:D.object}),children:D.node},t.defaultProps={root:e},t},e.createConnector=kc,e.HIGHLIGHT_TAGS=jc,e.version=Qc,e.Configure=Zc,e.connectAutoComplete=eu,e.connectBreadcrumb=ru,e.connectConfigure=Gc,e.connectCurrentRefinements=nu,e.connectHierarchicalMenu=fu,e.connectHighlight=hu,e.connectHits=pu,e.connectHitsPerPage=vu,e.connectInfiniteHits=gu,e.connectMenu=Pu,e.connectNumericMenu=Tu,e.connectPagination=Cu,e.connectPoweredBy=Iu,e.connectRange=qu,e.connectRefinementList=Gu,e.connectScrollTo=Zu,e.connectSearchBox=tf,e.connectSortBy=nf,e.connectStateResults=af,e.connectStats=sf,e.connectToggleRefinement=lf,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ReactInstantSearchCore.min.js.map
